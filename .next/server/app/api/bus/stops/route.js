/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bus/stops/route";
exports.ids = ["app/api/bus/stops/route"];
exports.modules = {

/***/ "(rsc)/./app/api/bus/stops/route.ts":
/*!************************************!*\
  !*** ./app/api/bus/stops/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _src_lib_busApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../src/lib/busApi */ \"(rsc)/./src/lib/busApi.ts\");\n\n\nconst SUGGESTION_TTL_SECONDS = 60;\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const query = (searchParams.get('query') || '').trim();\n    const anchor = (searchParams.get('anchor') || '').trim();\n    const limitParam = Number(searchParams.get('limit') || 20);\n    const limit = Number.isFinite(limitParam) ? Math.min(Math.max(limitParam, 1), 50) : 20;\n    if (!query) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            items: []\n        }, {\n            headers: {\n                'Cache-Control': 'private, max-age=30'\n            }\n        });\n    }\n    const items = await (0,_src_lib_busApi__WEBPACK_IMPORTED_MODULE_1__.getBusStopSuggestions)(query, anchor || undefined, limit);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        items: items.map((item)=>item.title)\n    }, {\n        headers: {\n            'Cache-Control': `private, max-age=${SUGGESTION_TTL_SECONDS}`\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2J1cy9zdG9wcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Q7QUFDVztBQUVuRSxNQUFNRSx5QkFBeUI7QUFFeEIsZUFBZUMsSUFBSUMsT0FBb0I7SUFDNUMsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJRixRQUFRRyxHQUFHO0lBQzVDLE1BQU1DLFFBQVEsQ0FBQ0gsYUFBYUksR0FBRyxDQUFDLFlBQVksRUFBQyxFQUFHQyxJQUFJO0lBQ3BELE1BQU1DLFNBQVMsQ0FBQ04sYUFBYUksR0FBRyxDQUFDLGFBQWEsRUFBQyxFQUFHQyxJQUFJO0lBQ3RELE1BQU1FLGFBQWFDLE9BQU9SLGFBQWFJLEdBQUcsQ0FBQyxZQUFZO0lBQ3ZELE1BQU1LLFFBQVFELE9BQU9FLFFBQVEsQ0FBQ0gsY0FBY0ksS0FBS0MsR0FBRyxDQUFDRCxLQUFLRSxHQUFHLENBQUNOLFlBQVksSUFBSSxNQUFNO0lBRXBGLElBQUksQ0FBQ0osT0FBTztRQUNWLE9BQU9SLHFEQUFZQSxDQUFDbUIsSUFBSSxDQUFDO1lBQUVDLE9BQU8sRUFBRTtRQUFDLEdBQUc7WUFBRUMsU0FBUztnQkFBRSxpQkFBaUI7WUFBc0I7UUFBRTtJQUNoRztJQUVBLE1BQU1ELFFBQVEsTUFBTW5CLHNFQUFxQkEsQ0FBQ08sT0FBT0csVUFBVVcsV0FBV1I7SUFDdEUsT0FBT2QscURBQVlBLENBQUNtQixJQUFJLENBQ3RCO1FBQUVDLE9BQU9BLE1BQU1HLEdBQUcsQ0FBQyxDQUFDQyxPQUFTQSxLQUFLQyxLQUFLO0lBQUUsR0FDekM7UUFBRUosU0FBUztZQUFFLGlCQUFpQixDQUFDLGlCQUFpQixFQUFFbkIsd0JBQXdCO1FBQUM7SUFBRTtBQUVqRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtaWNoaVxcYnVzLXVpXFxhcHBcXGFwaVxcYnVzXFxzdG9wc1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgZ2V0QnVzU3RvcFN1Z2dlc3Rpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2xpYi9idXNBcGknO1xyXG5cclxuY29uc3QgU1VHR0VTVElPTl9UVExfU0VDT05EUyA9IDYwO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcclxuICBjb25zdCBxdWVyeSA9IChzZWFyY2hQYXJhbXMuZ2V0KCdxdWVyeScpIHx8ICcnKS50cmltKCk7XHJcbiAgY29uc3QgYW5jaG9yID0gKHNlYXJjaFBhcmFtcy5nZXQoJ2FuY2hvcicpIHx8ICcnKS50cmltKCk7XHJcbiAgY29uc3QgbGltaXRQYXJhbSA9IE51bWJlcihzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpIHx8IDIwKTtcclxuICBjb25zdCBsaW1pdCA9IE51bWJlci5pc0Zpbml0ZShsaW1pdFBhcmFtKSA/IE1hdGgubWluKE1hdGgubWF4KGxpbWl0UGFyYW0sIDEpLCA1MCkgOiAyMDtcclxuXHJcbiAgaWYgKCFxdWVyeSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgaXRlbXM6IFtdIH0sIHsgaGVhZGVyczogeyAnQ2FjaGUtQ29udHJvbCc6ICdwcml2YXRlLCBtYXgtYWdlPTMwJyB9IH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBnZXRCdXNTdG9wU3VnZ2VzdGlvbnMocXVlcnksIGFuY2hvciB8fCB1bmRlZmluZWQsIGxpbWl0KTtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICB7IGl0ZW1zOiBpdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udGl0bGUpIH0sXHJcbiAgICB7IGhlYWRlcnM6IHsgJ0NhY2hlLUNvbnRyb2wnOiBgcHJpdmF0ZSwgbWF4LWFnZT0ke1NVR0dFU1RJT05fVFRMX1NFQ09ORFN9YCB9IH1cclxuICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRCdXNTdG9wU3VnZ2VzdGlvbnMiLCJTVUdHRVNUSU9OX1RUTF9TRUNPTkRTIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInF1ZXJ5IiwiZ2V0IiwidHJpbSIsImFuY2hvciIsImxpbWl0UGFyYW0iLCJOdW1iZXIiLCJsaW1pdCIsImlzRmluaXRlIiwiTWF0aCIsIm1pbiIsIm1heCIsImpzb24iLCJpdGVtcyIsImhlYWRlcnMiLCJ1bmRlZmluZWQiLCJtYXAiLCJpdGVtIiwidGl0bGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/bus/stops/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbus%2Fstops%2Froute&page=%2Fapi%2Fbus%2Fstops%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbus%2Fstops%2Froute.ts&appDir=C%3A%5CUsers%5Cmichi%5Cbus-ui%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmichi%5Cbus-ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbus%2Fstops%2Froute&page=%2Fapi%2Fbus%2Fstops%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbus%2Fstops%2Froute.ts&appDir=C%3A%5CUsers%5Cmichi%5Cbus-ui%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmichi%5Cbus-ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_michi_bus_ui_app_api_bus_stops_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/bus/stops/route.ts */ \"(rsc)/./app/api/bus/stops/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bus/stops/route\",\n        pathname: \"/api/bus/stops\",\n        filename: \"route\",\n        bundlePath: \"app/api/bus/stops/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\michi\\\\bus-ui\\\\app\\\\api\\\\bus\\\\stops\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_michi_bus_ui_app_api_bus_stops_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/bus/stops/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZidXMlMkZzdG9wcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYnVzJTJGc3RvcHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZidXMlMkZzdG9wcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNtaWNoaSU1Q2J1cy11aSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDbWljaGklNUNidXMtdWkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNkO0FBQ1M7QUFDTztBQUNLO0FBQ21DO0FBQ2pEO0FBQ087QUFDZjtBQUNzQztBQUN6QjtBQUNNO0FBQ0M7QUFDaEI7QUFDbUI7QUFDckY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9EO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0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QUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLDZGQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxtaWNoaVxcXFxidXMtdWlcXFxcYXBwXFxcXGFwaVxcXFxidXNcXFxcc3RvcHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2J1cy9zdG9wcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2J1cy9zdG9wc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYnVzL3N0b3BzL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXG1pY2hpXFxcXGJ1cy11aVxcXFxhcHBcXFxcYXBpXFxcXGJ1c1xcXFxzdG9wc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2J1cy9zdG9wcy9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbus%2Fstops%2Froute&page=%2Fapi%2Fbus%2Fstops%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbus%2Fstops%2Froute.ts&appDir=C%3A%5CUsers%5Cmichi%5Cbus-ui%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmichi%5Cbus-ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/lib/busApi.ts":
/*!***************************!*\
  !*** ./src/lib/busApi.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBusStopSuggestions: () => (/* binding */ getBusStopSuggestions),\n/* harmony export */   getNextBuses: () => (/* binding */ getNextBuses),\n/* harmony export */   getNextBusesSafe: () => (/* binding */ getNextBusesSafe),\n/* harmony export */   getOccupancySampleStats: () => (/* binding */ getOccupancySampleStats)\n/* harmony export */ });\nconst BASE = 'https://api.odpt.org/api/v4';\nconst TOKEN = process.env.ODPT_TOKEN || process.env.NEXT_PUBLIC_ODPT_TOKEN || '';\nconst TOEI_OPERATOR = 'odpt.Operator:Toei';\nconst PAGE_SIZE = 1000;\nconst OCCUPANCY_CACHE_TTL_MS = 30 * 1000;\nconst PATTERN_CACHE_TTL_MS = 10 * 60 * 1000;\nconst POLE_CACHE_TTL_MS = 10 * 60 * 1000;\nconst STOP_LIST_CACHE_TTL_MS = 10 * 60 * 1000;\nconst OCCUPANCY_MATCH_WINDOW_MS = 10 * 60 * 1000;\nlet occupancyCache = null;\nlet patternCache = null;\nconst poleCache = new Map();\nlet stopListCache = null;\nfunction buildUrl(path, params) {\n    const url = new URL(`${BASE}/${path}`);\n    if (params) {\n        for (const [k, v] of Object.entries(params)){\n            url.searchParams.set(k, String(v));\n        }\n    }\n    url.searchParams.set('acl:consumerKey', TOKEN);\n    return url.toString();\n}\nasync function wait(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\nasync function fetchJsonUrl(url, attempt = 0) {\n    const res = await fetch(url);\n    if (res.status === 404) return [];\n    if (res.status === 429 && attempt < 4) {\n        await wait(800 + attempt * 400);\n        return fetchJsonUrl(url, attempt + 1);\n    }\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`ODPT fetch failed: ${res.status} ${text}`);\n    }\n    const data = await res.json();\n    return Array.isArray(data) ? data : [];\n}\nasync function fetchAllPages(resource, params) {\n    const results = [];\n    let skip = 0;\n    let first = true;\n    while(true){\n        const url = buildUrl(resource, {\n            ...params || {},\n            '$top': String(PAGE_SIZE),\n            '$skip': String(skip)\n        });\n        const batch = await fetchJsonUrl(url);\n        if (!Array.isArray(batch) || batch.length === 0) {\n            if (first) {\n                const fallback = await fetchJsonUrl(buildUrl(resource, params));\n                return Array.isArray(fallback) ? fallback : [];\n            }\n            break;\n        }\n        results.push(...batch);\n        skip += PAGE_SIZE;\n        first = false;\n    }\n    return results;\n}\nfunction getStopName(note) {\n    return String(note || '').split(':')[0];\n}\nfunction normalizeText(value) {\n    return String(value || '').replace(/\\s+/g, '');\n}\nfunction normalizeStopNameForMatch(value) {\n    return String(value || '').replace(/\\s+/g, '').toLowerCase();\n}\nfunction noteMatchesNames(note, names) {\n    const normalizedNote = normalizeText(note);\n    return names.some((name)=>normalizedNote === normalizeText(name));\n}\nfunction stopsFromTimetable(tt) {\n    const objs = Array.isArray(tt['odpt:busTimetableObject']) ? tt['odpt:busTimetableObject'] : [];\n    return objs.map((obj)=>({\n            pole: String(obj['odpt:busstopPole'] || ''),\n            note: getStopName(obj['odpt:note']),\n            isMidnight: Boolean(obj['odpt:isMidnight']),\n            arrivalTime: String(obj['odpt:arrivalTime'] || ''),\n            departureTime: String(obj['odpt:departureTime'] || '')\n        }));\n}\nfunction findStopIndex(stops, ids, names) {\n    const hasIds = ids.length > 0;\n    return stops.findIndex((s)=>hasIds ? ids.includes(s.pole) : noteMatchesNames(s.note, names));\n}\nfunction parseTimeToDate(timeStr, isMidnight) {\n    const match = timeStr.match(/^(\\d{1,2}):(\\d{2})$/);\n    if (!match) return null;\n    const now = new Date();\n    const date = new Date(now);\n    date.setHours(Number(match[1]), Number(match[2]), 0, 0);\n    if (isMidnight) date.setDate(date.getDate() + 1);\n    if (date.getTime() < now.getTime()) date.setDate(date.getDate() + 1);\n    return date;\n}\nfunction formatTime(date) {\n    const h = String(date.getHours()).padStart(2, '0');\n    const m = String(date.getMinutes()).padStart(2, '0');\n    return `${h}:${m}`;\n}\nfunction toJstDateKey(epochMs) {\n    const jst = new Date(epochMs + 9 * 60 * 60 * 1000);\n    const y = jst.getUTCFullYear();\n    const m = String(jst.getUTCMonth() + 1).padStart(2, '0');\n    const d = String(jst.getUTCDate()).padStart(2, '0');\n    return `${y}-${m}-${d}`;\n}\nfunction extractStatusText(source) {\n    const direct = source?.['odpt:note'] || source?.['odpt:remark'] || source?.['odpt:status'] || source?.['odpt:busrouteStatus'] || source?.['odpt:trainInformationStatus'] || source?.['odpt:operationStatus'] || '';\n    if (direct) return String(direct);\n    for (const [key, value] of Object.entries(source || {})){\n        if (!/status|note|remark/i.test(key)) continue;\n        if (value === null || value === undefined) continue;\n        const str = String(value).trim();\n        if (str) return str;\n    }\n    return '';\n}\nfunction inferBusrouteId(pattern) {\n    const match = pattern.match(/^odpt\\.BusroutePattern:Toei\\.([^.]+)\\./);\n    return match ? `odpt.Busroute:Toei.${match[1]}` : '';\n}\nfunction mapOccupancyLevel(occupancy) {\n    if (!occupancy) return 'unknown';\n    const s = String(occupancy).toLowerCase();\n    if (s.includes('')) return 'medium';\n    if (s.includes('') || s.includes('full') || s.includes('high') || s.includes('crowd')) return 'high';\n    if (s.includes('') || s.includes('medium') || s.includes('normal')) return 'medium';\n    if (s.includes('') || s.includes('low') || s.includes('empty')) return 'low';\n    return 'medium';\n}\nfunction parseOccupancyRatio(occupancy) {\n    if (!occupancy) return null;\n    const match = String(occupancy).match(/(\\d{1,3})/);\n    if (!match) return null;\n    const value = Number(match[1]);\n    if (Number.isNaN(value)) return null;\n    return Math.max(0, Math.min(100, value));\n}\nfunction buildNameVariants(input, poles) {\n    const names = new Set();\n    const trimmed = input.trim();\n    if (trimmed) names.add(trimmed);\n    poles.forEach((p)=>{\n        const title = String(p.title || '').trim();\n        if (title) names.add(title);\n    });\n    return Array.from(names);\n}\nasync function getPoleMatchesByName(name) {\n    const trimmed = name.trim();\n    if (!trimmed) return [];\n    const cached = poleCache.get(trimmed);\n    if (cached && cached.expires > Date.now()) return cached.value;\n    const queries = new Set();\n    const push = (value)=>{\n        const v = value.trim();\n        if (v) queries.add(v);\n    };\n    push(trimmed);\n    if (!trimmed.endsWith('')) push(`${trimmed}`);\n    if (!trimmed.endsWith('')) push(`${trimmed}`);\n    if (trimmed.endsWith('')) push(trimmed.slice(0, -2));\n    if (trimmed.endsWith('')) push(trimmed.slice(0, -1));\n    const matches = new Map();\n    const normalized = trimmed.replace(/\\s+/g, '');\n    for (const q of queries){\n        const poles = await fetchAllPages('odpt:BusstopPole', {\n            'odpt:operator': TOEI_OPERATOR,\n            'dc:title': q\n        });\n        poles.forEach((p)=>{\n            const title = String(p['dc:title'] || '').replace(/\\s+/g, '');\n            if (!title.includes(normalized)) return;\n            const id = String(p['owl:sameAs'] || p['@id'] || '');\n            if (!id) return;\n            const patterns = Array.isArray(p['odpt:busroutePattern']) ? p['odpt:busroutePattern'].map((v)=>String(v)).filter(Boolean) : [];\n            if (!matches.has(id)) {\n                matches.set(id, {\n                    id,\n                    title: String(p['dc:title'] || ''),\n                    patterns\n                });\n            } else if (patterns.length > 0) {\n                const existing = matches.get(id);\n                existing?.patterns.push(...patterns);\n            }\n        });\n    }\n    if (matches.size === 0) {\n        const list = await getStopList();\n        const normalizedQuery = trimmed.replace(/\\s+/g, '');\n        list.filter((item)=>item.normalized.includes(normalizeStopNameForMatch(normalizedQuery))).slice(0, 50).forEach((item)=>{\n            matches.set(item.id, {\n                id: item.id,\n                title: item.title,\n                patterns: item.patterns\n            });\n        });\n    }\n    const result = Array.from(matches.values()).map((m)=>({\n            ...m,\n            patterns: Array.from(new Set(m.patterns))\n        }));\n    poleCache.set(trimmed, {\n        expires: Date.now() + POLE_CACHE_TTL_MS,\n        value: result\n    });\n    return result;\n}\nasync function getStopList() {\n    if (stopListCache && stopListCache.expires > Date.now()) return stopListCache.value;\n    if (!TOKEN) return [];\n    const poles = await fetchAllPages('odpt:BusstopPole', {\n        'odpt:operator': TOEI_OPERATOR\n    });\n    const list = poles.map((p)=>{\n        const id = String(p['owl:sameAs'] || p['@id'] || '');\n        const title = String(p['dc:title'] || '').trim();\n        const patterns = Array.isArray(p['odpt:busroutePattern']) ? p['odpt:busroutePattern'].map((v)=>String(v)).filter(Boolean) : [];\n        if (!id || !title) return null;\n        return {\n            id,\n            title,\n            patterns: Array.from(new Set(patterns)),\n            normalized: normalizeStopNameForMatch(title)\n        };\n    }).filter(Boolean);\n    stopListCache = {\n        expires: Date.now() + STOP_LIST_CACHE_TTL_MS,\n        value: list\n    };\n    return list;\n}\nasync function getBusStopSuggestions(query, anchor, limit = 20) {\n    if (!TOKEN) return [];\n    const trimmedQuery = query.trim();\n    if (!trimmedQuery) return [];\n    const list = await getStopList();\n    let filtered = list;\n    const anchorTrimmed = String(anchor || '').trim();\n    if (anchorTrimmed) {\n        const anchorPatterns = new Set();\n        const anchorNormalized = normalizeStopNameForMatch(anchorTrimmed);\n        list.forEach((item)=>{\n            if (item.normalized.includes(anchorNormalized)) {\n                item.patterns.forEach((p)=>anchorPatterns.add(p));\n            }\n        });\n        const anchorMatches = await getPoleMatchesByName(anchorTrimmed);\n        anchorMatches.forEach((match)=>match.patterns.forEach((p)=>anchorPatterns.add(p)));\n        if (anchorPatterns.size > 0) {\n            filtered = filtered.filter((item)=>item.patterns.some((p)=>anchorPatterns.has(p)));\n        }\n    }\n    const normalizedQuery = normalizeStopNameForMatch(trimmedQuery);\n    const scored = filtered.map((item)=>{\n        const name = item.normalized;\n        if (!name.includes(normalizedQuery)) return null;\n        const starts = name.startsWith(normalizedQuery);\n        const score = starts ? 0 : 1;\n        return {\n            item,\n            score\n        };\n    }).filter(Boolean);\n    scored.sort((a, b)=>{\n        if (a.score !== b.score) return a.score - b.score;\n        if (a.item.title.length !== b.item.title.length) return a.item.title.length - b.item.title.length;\n        return a.item.title.localeCompare(b.item.title, 'ja');\n    });\n    const seen = new Set();\n    const results = [];\n    for (const entry of scored){\n        if (results.length >= limit) break;\n        if (seen.has(entry.item.title)) continue;\n        seen.add(entry.item.title);\n        results.push({\n            id: entry.item.id,\n            title: entry.item.title\n        });\n    }\n    return results;\n}\nfunction extractRouteName(tt, patternId, routeId, fallback) {\n    return String(tt['dc:title'] || fallback || routeId || patternId || '');\n}\nfunction stripBranchFromPattern(patternId) {\n    return String(patternId || '').replace(/\\.[^.]+$/, '');\n}\nfunction stripBranchFromRouteName(routeName) {\n    const trimmed = String(routeName || '').trim();\n    if (!trimmed) return '';\n    return trimmed.replace(/[-]?\\d+$/, '');\n}\nfunction buildRouteKey(routeName, routeId, patternId) {\n    const baseName = stripBranchFromRouteName(routeName);\n    if (baseName) return baseName;\n    const basePattern = stripBranchFromPattern(patternId);\n    if (basePattern) return basePattern;\n    if (routeId) return routeId;\n    return routeName || patternId;\n}\nfunction extractDestinationCandidate(bus) {\n    const direct = bus['odpt:destinationSign'] || bus['odpt:destination'] || bus['odpt:destinationSignText'] || '';\n    if (direct !== null && direct !== undefined && direct !== '') return String(direct);\n    for (const [key, value] of Object.entries(bus || {})){\n        if (!/destination/i.test(key)) continue;\n        if (value === null || value === undefined) continue;\n        const str = String(value).trim();\n        if (str) return str;\n    }\n    return '';\n}\nfunction extractPredictedArrivalEpoch(bus) {\n    const candidate = bus['odpt:predictedArrivalTime'] || bus['odpt:predictedDepartureTime'] || bus['odpt:arrivalTime'] || bus['odpt:departureTime'] || '';\n    const ts = Date.parse(String(candidate || ''));\n    return Number.isNaN(ts) ? 0 : ts;\n}\nfunction formatRouteNameWithDestination(routeName, destStopName) {\n    const base = String(routeName || '').trim();\n    const dest = String(destStopName || '').trim();\n    if (!dest) return base;\n    if (!base) return dest;\n    const normalizedBase = normalizeText(base);\n    const normalizedDest = normalizeText(dest);\n    if (normalizedBase.includes(normalizedDest)) return base;\n    return `${base} (${dest})`;\n}\nfunction extractOccupancyCandidate(bus) {\n    const direct = bus['odpt:occupancy'] || bus['odpt:occupancyStatus'] || bus['odpt:ext:occupancy'] || bus['odpt:ext:occupancyStatus'] || '';\n    if (direct !== null && direct !== undefined && direct !== '') return String(direct);\n    for (const [key, value] of Object.entries(bus || {})){\n        if (!/occupancy|crowd|congestion/i.test(key)) continue;\n        if (value === null || value === undefined) continue;\n        if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n            const str = String(value).trim();\n            if (str) return str;\n        }\n    }\n    return '';\n}\nfunction extractBusTimestamp(bus) {\n    const candidate = bus['dc:date'] || bus['dcterms:created'] || bus['dcterms:modified'] || bus['odpt:date'] || bus['odpt:time'] || '';\n    const ts = Date.parse(String(candidate || ''));\n    return Number.isNaN(ts) ? 0 : ts;\n}\nfunction occupancyRatioFromText(value) {\n    const match = String(value || '').match(/(\\d{1,3})/);\n    if (match) {\n        const num = Number(match[1]);\n        if (!Number.isNaN(num)) return Math.max(0, Math.min(100, num));\n    }\n    const lower = String(value || '').toLowerCase();\n    if (lower.includes('') || lower.includes('full') || lower.includes('high') || lower.includes('crowd')) return 85;\n    if (lower.includes('') || lower.includes('medium') || lower.includes('normal')) return 55;\n    if (lower.includes('') || lower.includes('low') || lower.includes('empty')) return 25;\n    return null;\n}\nfunction occupancyLevelFromRatio(ratio) {\n    if (ratio === null || Number.isNaN(ratio)) return 'unknown';\n    if (ratio >= 70) return 'high';\n    if (ratio >= 40) return 'medium';\n    return 'low';\n}\nasync function buildOccupancyIndex() {\n    if (occupancyCache && occupancyCache.expires > Date.now()) return occupancyCache.value;\n    const buses = await fetchAllPages('odpt:Bus', {\n        'odpt:operator': TOEI_OPERATOR\n    });\n    const byRouteSamples = new Map();\n    const delayByRoute = new Map();\n    const turnaroundByRouteStop = new Map();\n    buses.forEach((b)=>{\n        const routeId = String(b['odpt:busroute'] || '');\n        const patternId = String(b['odpt:busroutePattern'] || '');\n        if (!routeId && !patternId) return;\n        const ts = extractBusTimestamp(b);\n        const predictedEpoch = extractPredictedArrivalEpoch(b);\n        const destinationText = extractDestinationCandidate(b);\n        const delayRaw = Number(b['odpt:delay'] ?? 0);\n        const delaySec = Number.isFinite(delayRaw) ? Math.max(0, delayRaw) : 0;\n        const delayKey = routeId || patternId;\n        const delayExisting = delayByRoute.get(delayKey);\n        if (!delayExisting || ts >= delayExisting.ts) {\n            delayByRoute.set(delayKey, {\n                delaySec,\n                ts\n            });\n        }\n        if (predictedEpoch && destinationText) {\n            const normalizedDest = normalizeStopNameForMatch(destinationText);\n            const turnKey = `${delayKey}__${normalizedDest}`;\n            const existing = turnaroundByRouteStop.get(turnKey);\n            if (!existing || ts >= existing.ts) {\n                turnaroundByRouteStop.set(turnKey, {\n                    epoch: predictedEpoch,\n                    ts\n                });\n            }\n        }\n        const occupancy = extractOccupancyCandidate(b);\n        if (!occupancy) return;\n        const ratio = occupancyRatioFromText(occupancy);\n        if (routeId) {\n            if (!byRouteSamples.has(routeId)) byRouteSamples.set(routeId, []);\n            byRouteSamples.get(routeId)?.push({\n                ts,\n                text: occupancy,\n                ratio\n            });\n        }\n        if (patternId) {\n            if (!byRouteSamples.has(patternId)) byRouteSamples.set(patternId, []);\n            byRouteSamples.get(patternId)?.push({\n                ts,\n                text: occupancy,\n                ratio\n            });\n        }\n    });\n    byRouteSamples.forEach((samples)=>samples.sort((a, b)=>a.ts - b.ts));\n    const result = {\n        byRouteSamples,\n        sampleBuses: buses.slice(0, 5),\n        delayByRoute: new Map(Array.from(delayByRoute.entries()).map(([key, value])=>[\n                key,\n                value.delaySec\n            ])),\n        turnaroundByRouteStop\n    };\n    occupancyCache = {\n        expires: Date.now() + OCCUPANCY_CACHE_TTL_MS,\n        value: result\n    };\n    return result;\n}\nasync function getOccupancySampleStats(routeIds, patternIds) {\n    const index = await buildOccupancyIndex();\n    const uniqRouteIds = Array.from(new Set(routeIds.filter(Boolean)));\n    const uniqPatternIds = Array.from(new Set(patternIds.filter(Boolean)));\n    const routeCounts = {};\n    uniqRouteIds.forEach((id)=>{\n        routeCounts[id] = index.byRouteSamples.get(id)?.length || 0;\n    });\n    const patternCounts = {};\n    uniqPatternIds.forEach((id)=>{\n        patternCounts[id] = index.byRouteSamples.get(id)?.length || 0;\n    });\n    return {\n        routeCounts,\n        patternCounts,\n        totalSamples: Array.from(index.byRouteSamples.values()).reduce((sum, items)=>sum + items.length, 0)\n    };\n}\nfunction dedupeDepartures(departures) {\n    const byRoute = new Map();\n    departures.forEach((d)=>{\n        if (!byRoute.has(d.routeKey)) byRoute.set(d.routeKey, []);\n        byRoute.get(d.routeKey)?.push(d);\n    });\n    const merged = [];\n    byRoute.forEach((items)=>{\n        items.sort((a, b)=>a.departureEpoch - b.departureEpoch);\n        const reduced = [];\n        items.forEach((item)=>{\n            const prev = reduced[reduced.length - 1];\n            if (prev && item.departureEpoch - prev.departureEpoch <= 3 * 60 * 1000) {\n                reduced[reduced.length - 1] = item;\n            } else {\n                reduced.push(item);\n            }\n        });\n        merged.push(...reduced);\n    });\n    return merged;\n}\nasync function getNextBuses(originStopName, destStopName) {\n    if (!TOKEN) throw new Error('ODPT_TOKEN is not set');\n    const [originPoles, destPoles] = await Promise.all([\n        getPoleMatchesByName(originStopName),\n        getPoleMatchesByName(destStopName)\n    ]);\n    const originPoleNameMap = new Map(originPoles.map((p)=>[\n            p.id,\n            p.title\n        ]));\n    const originIds = originPoles.map((p)=>p.id);\n    const destIds = destPoles.map((p)=>p.id);\n    if (originIds.length === 0 || destIds.length === 0) return [];\n    const originNames = buildNameVariants(originStopName, originPoles);\n    const destNames = buildNameVariants(destStopName, destPoles);\n    const cachedPatterns = patternCache && patternCache.expires > Date.now() ? patternCache.value : null;\n    const [patterns, occupancyIndex] = await Promise.all([\n        cachedPatterns ? Promise.resolve(cachedPatterns) : fetchAllPages('odpt:BusroutePattern', {\n            'odpt:operator': TOEI_OPERATOR\n        }),\n        buildOccupancyIndex()\n    ]);\n    if (!cachedPatterns) {\n        patternCache = {\n            expires: Date.now() + PATTERN_CACHE_TTL_MS,\n            value: patterns\n        };\n    }\n    const candidatePatterns = [];\n    patterns.forEach((p)=>{\n        const patternId = String(p['owl:sameAs'] || p['@id'] || '');\n        if (!patternId) return;\n        const orders = Array.isArray(p['odpt:busstopPoleOrder']) ? p['odpt:busstopPoleOrder'] : [];\n        let originIdx = -1;\n        let destIdx = -1;\n        orders.forEach((o, idx)=>{\n            const pole = String(o['odpt:busstopPole'] || '');\n            const note = getStopName(String(o['odpt:note'] || ''));\n            if (originIdx < 0 && (originIds.length > 0 ? originIds.includes(pole) : noteMatchesNames(note, originNames))) {\n                originIdx = idx;\n            }\n            if (destIdx < 0 && (destIds.length > 0 ? destIds.includes(pole) : noteMatchesNames(note, destNames))) {\n                destIdx = idx;\n            }\n        });\n        if (originIdx >= 0 && destIdx >= 0 && originIdx < destIdx) {\n            candidatePatterns.push({\n                patternId,\n                busroute: String(p['odpt:busroute'] || ''),\n                title: String(p['dc:title'] || '')\n            });\n        }\n    });\n    if (candidatePatterns.length === 0) return [];\n    const departures = [];\n    for (const pattern of candidatePatterns){\n        const patternId = pattern.patternId;\n        const routeId = pattern.busroute || inferBusrouteId(patternId);\n        let timetables = await fetchAllPages('odpt:BusTimetable', {\n            'odpt:busroutePattern': patternId\n        });\n        if (timetables.length === 0 && routeId) {\n            timetables = await fetchAllPages('odpt:BusTimetable', {\n                'odpt:busroute': routeId\n            });\n        }\n        for (const tt of timetables){\n            const stops = stopsFromTimetable(tt);\n            const originIdx = findStopIndex(stops, originIds, originNames);\n            const destIdx = findStopIndex(stops, destIds, destNames);\n            if (originIdx < 0 || destIdx < 0 || originIdx >= destIdx) continue;\n            const stop = stops[originIdx];\n            const originPoleName = originPoleNameMap.get(stop.pole) || stop.note || originStopName;\n            const timeStr = stop.departureTime || stop.arrivalTime;\n            if (!timeStr) continue;\n            const scheduledDate = parseTimeToDate(timeStr, stop.isMidnight);\n            if (!scheduledDate) continue;\n            const delaySec = routeId && occupancyIndex.delayByRoute.get(routeId) || occupancyIndex.delayByRoute.get(patternId) || 0;\n            const adjustedDate = new Date(scheduledDate.getTime() + delaySec * 1000);\n            const turnKey = `${routeId || patternId}__${normalizeStopNameForMatch(originStopName)}`;\n            const turnInfo = occupancyIndex.turnaroundByRouteStop.get(turnKey);\n            if (turnInfo && turnInfo.epoch > adjustedDate.getTime()) {\n                adjustedDate.setTime(turnInfo.epoch);\n            }\n            const adjustedTimeStr = formatTime(adjustedDate);\n            const etaMinutes = Math.max(0, Math.round((adjustedDate.getTime() - Date.now()) / 60000));\n            const scheduledTimeStr = formatTime(scheduledDate);\n            const delayMinutes = Math.max(0, Math.round((adjustedDate.getTime() - scheduledDate.getTime()) / 60000));\n            let occupancy = null;\n            let occupancyRatio = null;\n            if (routeId || patternId) {\n                const samples = routeId && occupancyIndex.byRouteSamples.get(routeId) || occupancyIndex.byRouteSamples.get(patternId) || [];\n                const targetTs = adjustedDate.getTime();\n                let best = null;\n                let bestDiff = Number.POSITIVE_INFINITY;\n                for (const sample of samples){\n                    const diff = Math.abs(sample.ts - targetTs);\n                    if (diff <= OCCUPANCY_MATCH_WINDOW_MS && diff < bestDiff) {\n                        best = sample;\n                        bestDiff = diff;\n                    }\n                }\n                if (best) {\n                    occupancy = best.text;\n                    occupancyRatio = best.ratio;\n                    if (occupancyRatio === null && occupancy) {\n                        occupancyRatio = parseOccupancyRatio(occupancy) ?? occupancyRatioFromText(occupancy);\n                    }\n                }\n            }\n            const occupancyLevel = occupancyRatio !== null ? occupancyLevelFromRatio(occupancyRatio) : mapOccupancyLevel(occupancy);\n            const rawRouteName = extractRouteName(tt, patternId, routeId, pattern.title);\n            const routeName = rawRouteName;\n            const routeKey = buildRouteKey(rawRouteName, routeId, patternId);\n            const normalizedDest = normalizeText(destStopName);\n            const normalizedRoute = normalizeText(routeName);\n            const adjustedDestStopName = normalizedRoute.includes(normalizedDest) ? '' : destStopName;\n            const statusText = extractStatusText(tt);\n            const statusIsLast = statusText.includes('');\n            departures.push({\n                id: `${routeKey}-${adjustedTimeStr}`,\n                routeName,\n                routeId: routeId || undefined,\n                patternId: patternId || undefined,\n                originStopName,\n                originPoleName,\n                destStopName: adjustedDestStopName,\n                scheduledTime: scheduledTimeStr,\n                scheduledEpoch: scheduledDate.getTime(),\n                delayMinutes,\n                departureTime: adjustedTimeStr,\n                departureEpoch: adjustedDate.getTime(),\n                etaMinutes,\n                occupancy,\n                occupancyLevel,\n                occupancyRatio,\n                routeKey,\n                statusIsLast\n            });\n        }\n    }\n    const now = Date.now();\n    const upcoming = departures.filter((d)=>d.departureEpoch >= now);\n    const deduped = dedupeDepartures(upcoming);\n    deduped.sort((a, b)=>a.departureEpoch - b.departureEpoch);\n    const todayKey = toJstDateKey(Date.now());\n    const lastTodayByRoute = new Map();\n    deduped.forEach((item)=>{\n        if (toJstDateKey(item.departureEpoch) !== todayKey) return;\n        const current = lastTodayByRoute.get(item.routeKey);\n        if (!current || item.departureEpoch > current) lastTodayByRoute.set(item.routeKey, item.departureEpoch);\n    });\n    const byRoute = new Map();\n    deduped.forEach((item)=>{\n        if (!byRoute.has(item.routeKey)) byRoute.set(item.routeKey, []);\n        byRoute.get(item.routeKey)?.push(item);\n    });\n    const perRoute = [];\n    byRoute.forEach((items)=>{\n        items.sort((a, b)=>a.departureEpoch - b.departureEpoch);\n        perRoute.push(...items.slice(0, 2));\n    });\n    perRoute.sort((a, b)=>a.departureEpoch - b.departureEpoch);\n    return perRoute.map(({ statusIsLast, routeKey, ...rest })=>({\n            ...rest,\n            isLast: statusIsLast || rest.departureEpoch === lastTodayByRoute.get(routeKey)\n        }));\n}\nasync function getNextBusesSafe(originStopName, destStopName) {\n    try {\n        if (!TOKEN) {\n            console.error('[busApi] ODPT_TOKEN is not set');\n            return [];\n        }\n        return await getNextBuses(originStopName, destStopName);\n    } catch (e) {\n        console.error('[busApi] Error:', e instanceof Error ? e.message : String(e));\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R3hMLEtBQUtzRztJQUNuQztJQUVBLE1BQU0ySSxXQUE4QixFQUFFO0lBQ3RDMUQsUUFBUXhHLE9BQU8sQ0FBQyxDQUFDcUc7UUFDZkEsTUFBTTdELElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxFQUFFa0UsY0FBYyxHQUFHakUsRUFBRWlFLGNBQWM7UUFDeER1RCxTQUFTalAsSUFBSSxJQUFJb0wsTUFBTTNGLEtBQUssQ0FBQyxHQUFHO0lBQ2xDO0lBRUF3SixTQUFTMUgsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVrRSxjQUFjLEdBQUdqRSxFQUFFaUUsY0FBYztJQUUzRCxPQUFPdUQsU0FBU2hPLEdBQUcsQ0FBQyxDQUFDLEVBQUV3TixZQUFZLEVBQUVqRCxRQUFRLEVBQUUsR0FBRzBELE1BQU0sR0FBTTtZQUM1RCxHQUFHQSxJQUFJO1lBQ1BDLFFBQVFWLGdCQUFnQlMsS0FBS3hELGNBQWMsS0FBS3FELGlCQUFpQjFKLEdBQUcsQ0FBQ21HO1FBQ3ZFO0FBQ0Y7QUFFTyxlQUFlNEQsaUJBQWlCdEQsY0FBc0IsRUFBRWpELFlBQW9CO0lBQ2pGLElBQUk7UUFDRixJQUFJLENBQUNwTSxPQUFPO1lBQ1Y0UyxRQUFRQyxLQUFLLENBQUM7WUFDZCxPQUFPLEVBQUU7UUFDWDtRQUNBLE9BQU8sTUFBTXpELGFBQWFDLGdCQUFnQmpEO0lBQzVDLEVBQUUsT0FBTzBHLEdBQUc7UUFDVkYsUUFBUUMsS0FBSyxDQUFDLG1CQUFtQkMsYUFBYXBRLFFBQVFvUSxFQUFFQyxPQUFPLEdBQUduUixPQUFPa1I7UUFDekUsT0FBTyxFQUFFO0lBQ1g7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxtaWNoaVxcYnVzLXVpXFxzcmNcXGxpYlxcYnVzQXBpLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEJ1c0Fycml2YWwgPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICByb3V0ZU5hbWU6IHN0cmluZztcclxuICByb3V0ZUlkPzogc3RyaW5nO1xyXG4gIHBhdHRlcm5JZD86IHN0cmluZztcclxuICBvcmlnaW5TdG9wTmFtZTogc3RyaW5nO1xyXG4gIG9yaWdpblBvbGVOYW1lPzogc3RyaW5nO1xyXG4gIGRlc3RTdG9wTmFtZTogc3RyaW5nO1xyXG4gIHNjaGVkdWxlZFRpbWU6IHN0cmluZztcclxuICBzY2hlZHVsZWRFcG9jaDogbnVtYmVyO1xyXG4gIGRlbGF5TWludXRlczogbnVtYmVyO1xyXG4gIGRlcGFydHVyZVRpbWU6IHN0cmluZztcclxuICBkZXBhcnR1cmVFcG9jaDogbnVtYmVyO1xyXG4gIGV0YU1pbnV0ZXM6IG51bWJlcjtcclxuICBvY2N1cGFuY3k/OiBzdHJpbmcgfCBudWxsO1xyXG4gIG9jY3VwYW5jeUxldmVsOiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHwgJ3Vua25vd24nO1xyXG4gIG9jY3VwYW5jeVJhdGlvPzogbnVtYmVyIHwgbnVsbDtcclxuICBpc0xhc3Q/OiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQnVzU3RvcFN1Z2dlc3Rpb24gPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG59O1xyXG5cclxudHlwZSBUaW1ldGFibGVTdG9wID0ge1xyXG4gIHBvbGU6IHN0cmluZztcclxuICBub3RlOiBzdHJpbmc7XHJcbiAgaXNNaWRuaWdodDogYm9vbGVhbjtcclxuICBhcnJpdmFsVGltZTogc3RyaW5nO1xyXG4gIGRlcGFydHVyZVRpbWU6IHN0cmluZztcclxufTtcclxuXHJcbmNvbnN0IEJBU0UgPSAnaHR0cHM6Ly9hcGkub2RwdC5vcmcvYXBpL3Y0JztcclxuY29uc3QgVE9LRU4gPSBwcm9jZXNzLmVudi5PRFBUX1RPS0VOIHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX09EUFRfVE9LRU4gfHwgJyc7XHJcbmNvbnN0IFRPRUlfT1BFUkFUT1IgPSAnb2RwdC5PcGVyYXRvcjpUb2VpJztcclxuY29uc3QgUEFHRV9TSVpFID0gMTAwMDtcclxuY29uc3QgT0NDVVBBTkNZX0NBQ0hFX1RUTF9NUyA9IDMwICogMTAwMDtcclxuY29uc3QgUEFUVEVSTl9DQUNIRV9UVExfTVMgPSAxMCAqIDYwICogMTAwMDtcclxuY29uc3QgUE9MRV9DQUNIRV9UVExfTVMgPSAxMCAqIDYwICogMTAwMDtcclxuY29uc3QgU1RPUF9MSVNUX0NBQ0hFX1RUTF9NUyA9IDEwICogNjAgKiAxMDAwO1xyXG5jb25zdCBPQ0NVUEFOQ1lfTUFUQ0hfV0lORE9XX01TID0gMTAgKiA2MCAqIDEwMDA7XHJcblxyXG50eXBlIENhY2hlRW50cnk8VD4gPSB7XHJcbiAgZXhwaXJlczogbnVtYmVyO1xyXG4gIHZhbHVlOiBUO1xyXG59O1xyXG5cclxubGV0IG9jY3VwYW5jeUNhY2hlOiBDYWNoZUVudHJ5PE9jY3VwYW5jeUluZGV4PiB8IG51bGwgPSBudWxsO1xyXG5sZXQgcGF0dGVybkNhY2hlOiBDYWNoZUVudHJ5PGFueVtdPiB8IG51bGwgPSBudWxsO1xyXG5jb25zdCBwb2xlQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgQ2FjaGVFbnRyeTxQb2xlTWF0Y2hbXT4+KCk7XHJcbmxldCBzdG9wTGlzdENhY2hlOiBDYWNoZUVudHJ5PEJ1c1N0b3BFbnRyeVtdPiB8IG51bGwgPSBudWxsO1xyXG5cclxuZnVuY3Rpb24gYnVpbGRVcmwocGF0aDogc3RyaW5nLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuPikge1xyXG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7QkFTRX0vJHtwYXRofWApO1xyXG4gIGlmIChwYXJhbXMpIHtcclxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHBhcmFtcykpIHtcclxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoaywgU3RyaW5nKHYpKTtcclxuICAgIH1cclxuICB9XHJcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2FjbDpjb25zdW1lcktleScsIFRPS0VOKTtcclxuICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdhaXQobXM6IG51bWJlcikge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEpzb25VcmwodXJsOiBzdHJpbmcsIGF0dGVtcHQgPSAwKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcclxuICBpZiAocmVzLnN0YXR1cyA9PT0gNDA0KSByZXR1cm4gW10gYXMgYW55W107XHJcbiAgaWYgKHJlcy5zdGF0dXMgPT09IDQyOSAmJiBhdHRlbXB0IDwgNCkge1xyXG4gICAgYXdhaXQgd2FpdCg4MDAgKyBhdHRlbXB0ICogNDAwKTtcclxuICAgIHJldHVybiBmZXRjaEpzb25VcmwodXJsLCBhdHRlbXB0ICsgMSk7XHJcbiAgfVxyXG4gIGlmICghcmVzLm9rKSB7XHJcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgT0RQVCBmZXRjaCBmYWlsZWQ6ICR7cmVzLnN0YXR1c30gJHt0ZXh0fWApO1xyXG4gIH1cclxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICByZXR1cm4gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbXTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbGxQYWdlcyhyZXNvdXJjZTogc3RyaW5nLCBwYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB7XHJcbiAgY29uc3QgcmVzdWx0czogYW55W10gPSBbXTtcclxuICBsZXQgc2tpcCA9IDA7XHJcbiAgbGV0IGZpcnN0ID0gdHJ1ZTtcclxuICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgY29uc3QgdXJsID0gYnVpbGRVcmwocmVzb3VyY2UsIHsgLi4uKHBhcmFtcyB8fCB7fSksICckdG9wJzogU3RyaW5nKFBBR0VfU0laRSksICckc2tpcCc6IFN0cmluZyhza2lwKSB9KTtcclxuICAgIGNvbnN0IGJhdGNoID0gYXdhaXQgZmV0Y2hKc29uVXJsKHVybCk7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYmF0Y2gpIHx8IGJhdGNoLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBpZiAoZmlyc3QpIHtcclxuICAgICAgICBjb25zdCBmYWxsYmFjayA9IGF3YWl0IGZldGNoSnNvblVybChidWlsZFVybChyZXNvdXJjZSwgcGFyYW1zKSk7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZmFsbGJhY2spID8gZmFsbGJhY2sgOiBbXTtcclxuICAgICAgfVxyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJlc3VsdHMucHVzaCguLi5iYXRjaCk7XHJcbiAgICBza2lwICs9IFBBR0VfU0laRTtcclxuICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgfVxyXG4gIHJldHVybiByZXN1bHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTdG9wTmFtZShub3RlOiBzdHJpbmcpIHtcclxuICByZXR1cm4gU3RyaW5nKG5vdGUgfHwgJycpLnNwbGl0KCc6JylbMF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVRleHQodmFsdWU6IHN0cmluZykge1xyXG4gIHJldHVybiBTdHJpbmcodmFsdWUgfHwgJycpLnJlcGxhY2UoL1xccysvZywgJycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVTdG9wTmFtZUZvck1hdGNoKHZhbHVlOiBzdHJpbmcpIHtcclxuICByZXR1cm4gU3RyaW5nKHZhbHVlIHx8ICcnKS5yZXBsYWNlKC9cXHMrL2csICcnKS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3RlTWF0Y2hlc05hbWVzKG5vdGU6IHN0cmluZywgbmFtZXM6IHN0cmluZ1tdKSB7XHJcbiAgY29uc3Qgbm9ybWFsaXplZE5vdGUgPSBub3JtYWxpemVUZXh0KG5vdGUpO1xyXG4gIHJldHVybiBuYW1lcy5zb21lKChuYW1lKSA9PiBub3JtYWxpemVkTm90ZSA9PT0gbm9ybWFsaXplVGV4dChuYW1lKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0b3BzRnJvbVRpbWV0YWJsZSh0dDogYW55KTogVGltZXRhYmxlU3RvcFtdIHtcclxuICBjb25zdCBvYmpzID0gQXJyYXkuaXNBcnJheSh0dFsnb2RwdDpidXNUaW1ldGFibGVPYmplY3QnXSkgPyB0dFsnb2RwdDpidXNUaW1ldGFibGVPYmplY3QnXSA6IFtdO1xyXG4gIHJldHVybiBvYmpzLm1hcCgob2JqOiBhbnkpID0+ICh7XHJcbiAgICBwb2xlOiBTdHJpbmcob2JqWydvZHB0OmJ1c3N0b3BQb2xlJ10gfHwgJycpLFxyXG4gICAgbm90ZTogZ2V0U3RvcE5hbWUob2JqWydvZHB0Om5vdGUnXSksXHJcbiAgICBpc01pZG5pZ2h0OiBCb29sZWFuKG9ialsnb2RwdDppc01pZG5pZ2h0J10pLFxyXG4gICAgYXJyaXZhbFRpbWU6IFN0cmluZyhvYmpbJ29kcHQ6YXJyaXZhbFRpbWUnXSB8fCAnJyksXHJcbiAgICBkZXBhcnR1cmVUaW1lOiBTdHJpbmcob2JqWydvZHB0OmRlcGFydHVyZVRpbWUnXSB8fCAnJyksXHJcbiAgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kU3RvcEluZGV4KHN0b3BzOiBUaW1ldGFibGVTdG9wW10sIGlkczogc3RyaW5nW10sIG5hbWVzOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IGhhc0lkcyA9IGlkcy5sZW5ndGggPiAwO1xyXG4gIHJldHVybiBzdG9wcy5maW5kSW5kZXgoKHMpID0+IChoYXNJZHMgPyBpZHMuaW5jbHVkZXMocy5wb2xlKSA6IG5vdGVNYXRjaGVzTmFtZXMocy5ub3RlLCBuYW1lcykpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VUaW1lVG9EYXRlKHRpbWVTdHI6IHN0cmluZywgaXNNaWRuaWdodDogYm9vbGVhbikge1xyXG4gIGNvbnN0IG1hdGNoID0gdGltZVN0ci5tYXRjaCgvXihcXGR7MSwyfSk6KFxcZHsyfSkkLyk7XHJcbiAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUobm93KTtcclxuICBkYXRlLnNldEhvdXJzKE51bWJlcihtYXRjaFsxXSksIE51bWJlcihtYXRjaFsyXSksIDAsIDApO1xyXG4gIGlmIChpc01pZG5pZ2h0KSBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAxKTtcclxuICBpZiAoZGF0ZS5nZXRUaW1lKCkgPCBub3cuZ2V0VGltZSgpKSBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAxKTtcclxuICByZXR1cm4gZGF0ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0VGltZShkYXRlOiBEYXRlKSB7XHJcbiAgY29uc3QgaCA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgY29uc3QgbSA9IFN0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKTtcclxuICByZXR1cm4gYCR7aH06JHttfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvSnN0RGF0ZUtleShlcG9jaE1zOiBudW1iZXIpIHtcclxuICBjb25zdCBqc3QgPSBuZXcgRGF0ZShlcG9jaE1zICsgOSAqIDYwICogNjAgKiAxMDAwKTtcclxuICBjb25zdCB5ID0ganN0LmdldFVUQ0Z1bGxZZWFyKCk7XHJcbiAgY29uc3QgbSA9IFN0cmluZyhqc3QuZ2V0VVRDTW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgY29uc3QgZCA9IFN0cmluZyhqc3QuZ2V0VVRDRGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gIHJldHVybiBgJHt5fS0ke219LSR7ZH1gO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0U3RhdHVzVGV4dChzb3VyY2U6IGFueSkge1xyXG4gIGNvbnN0IGRpcmVjdCA9XHJcbiAgICBzb3VyY2U/Llsnb2RwdDpub3RlJ10gfHxcclxuICAgIHNvdXJjZT8uWydvZHB0OnJlbWFyayddIHx8XHJcbiAgICBzb3VyY2U/Llsnb2RwdDpzdGF0dXMnXSB8fFxyXG4gICAgc291cmNlPy5bJ29kcHQ6YnVzcm91dGVTdGF0dXMnXSB8fFxyXG4gICAgc291cmNlPy5bJ29kcHQ6dHJhaW5JbmZvcm1hdGlvblN0YXR1cyddIHx8XHJcbiAgICBzb3VyY2U/Llsnb2RwdDpvcGVyYXRpb25TdGF0dXMnXSB8fFxyXG4gICAgJyc7XHJcbiAgaWYgKGRpcmVjdCkgcmV0dXJuIFN0cmluZyhkaXJlY3QpO1xyXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNvdXJjZSB8fCB7fSkpIHtcclxuICAgIGlmICghL3N0YXR1c3xub3RlfHJlbWFyay9pLnRlc3Qoa2V5KSkgY29udGludWU7XHJcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgY29udGludWU7XHJcbiAgICBjb25zdCBzdHIgPSBTdHJpbmcodmFsdWUpLnRyaW0oKTtcclxuICAgIGlmIChzdHIpIHJldHVybiBzdHI7XHJcbiAgfVxyXG4gIHJldHVybiAnJztcclxufVxyXG5cclxuZnVuY3Rpb24gaW5mZXJCdXNyb3V0ZUlkKHBhdHRlcm46IHN0cmluZykge1xyXG4gIGNvbnN0IG1hdGNoID0gcGF0dGVybi5tYXRjaCgvXm9kcHRcXC5CdXNyb3V0ZVBhdHRlcm46VG9laVxcLihbXi5dKylcXC4vKTtcclxuICByZXR1cm4gbWF0Y2ggPyBgb2RwdC5CdXNyb3V0ZTpUb2VpLiR7bWF0Y2hbMV19YCA6ICcnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYXBPY2N1cGFuY3lMZXZlbChvY2N1cGFuY3k/OiBzdHJpbmcgfCBudWxsKSB7XHJcbiAgaWYgKCFvY2N1cGFuY3kpIHJldHVybiAndW5rbm93bicgYXMgY29uc3Q7XHJcbiAgY29uc3QgcyA9IFN0cmluZyhvY2N1cGFuY3kpLnRvTG93ZXJDYXNlKCk7XHJcbiAgaWYgKHMuaW5jbHVkZXMoJ+ODh+ODvOOCv+OBquOBlycpKSByZXR1cm4gJ21lZGl1bScgYXMgY29uc3Q7XHJcbiAgaWYgKHMuaW5jbHVkZXMoJ+a6gCcpIHx8IHMuaW5jbHVkZXMoJ2Z1bGwnKSB8fCBzLmluY2x1ZGVzKCdoaWdoJykgfHwgcy5pbmNsdWRlcygnY3Jvd2QnKSkgcmV0dXJuICdoaWdoJyBhcyBjb25zdDtcclxuICBpZiAocy5pbmNsdWRlcygn5aSaJykgfHwgcy5pbmNsdWRlcygnbWVkaXVtJykgfHwgcy5pbmNsdWRlcygnbm9ybWFsJykpIHJldHVybiAnbWVkaXVtJyBhcyBjb25zdDtcclxuICBpZiAocy5pbmNsdWRlcygn5bCRJykgfHwgcy5pbmNsdWRlcygnbG93JykgfHwgcy5pbmNsdWRlcygnZW1wdHknKSkgcmV0dXJuICdsb3cnIGFzIGNvbnN0O1xyXG4gIHJldHVybiAnbWVkaXVtJyBhcyBjb25zdDtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VPY2N1cGFuY3lSYXRpbyhvY2N1cGFuY3k/OiBzdHJpbmcgfCBudWxsKSB7XHJcbiAgaWYgKCFvY2N1cGFuY3kpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IG1hdGNoID0gU3RyaW5nKG9jY3VwYW5jeSkubWF0Y2goLyhcXGR7MSwzfSkvKTtcclxuICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCB2YWx1ZSA9IE51bWJlcihtYXRjaFsxXSk7XHJcbiAgaWYgKE51bWJlci5pc05hTih2YWx1ZSkpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIHZhbHVlKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkTmFtZVZhcmlhbnRzKGlucHV0OiBzdHJpbmcsIHBvbGVzOiBQb2xlTWF0Y2hbXSkge1xyXG4gIGNvbnN0IG5hbWVzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgY29uc3QgdHJpbW1lZCA9IGlucHV0LnRyaW0oKTtcclxuICBpZiAodHJpbW1lZCkgbmFtZXMuYWRkKHRyaW1tZWQpO1xyXG4gIHBvbGVzLmZvckVhY2goKHApID0+IHtcclxuICAgIGNvbnN0IHRpdGxlID0gU3RyaW5nKHAudGl0bGUgfHwgJycpLnRyaW0oKTtcclxuICAgIGlmICh0aXRsZSkgbmFtZXMuYWRkKHRpdGxlKTtcclxuICB9KTtcclxuICByZXR1cm4gQXJyYXkuZnJvbShuYW1lcyk7XHJcbn1cclxuXHJcbnR5cGUgUG9sZU1hdGNoID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBwYXR0ZXJuczogc3RyaW5nW107XHJcbn07XHJcblxyXG50eXBlIEJ1c1N0b3BFbnRyeSA9IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgcGF0dGVybnM6IHN0cmluZ1tdO1xyXG4gIG5vcm1hbGl6ZWQ6IHN0cmluZztcclxufTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFBvbGVNYXRjaGVzQnlOYW1lKG5hbWU6IHN0cmluZykge1xyXG4gIGNvbnN0IHRyaW1tZWQgPSBuYW1lLnRyaW0oKTtcclxuICBpZiAoIXRyaW1tZWQpIHJldHVybiBbXSBhcyBQb2xlTWF0Y2hbXTtcclxuICBjb25zdCBjYWNoZWQgPSBwb2xlQ2FjaGUuZ2V0KHRyaW1tZWQpO1xyXG4gIGlmIChjYWNoZWQgJiYgY2FjaGVkLmV4cGlyZXMgPiBEYXRlLm5vdygpKSByZXR1cm4gY2FjaGVkLnZhbHVlO1xyXG4gIGNvbnN0IHF1ZXJpZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICBjb25zdCBwdXNoID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHYgPSB2YWx1ZS50cmltKCk7XHJcbiAgICBpZiAodikgcXVlcmllcy5hZGQodik7XHJcbiAgfTtcclxuXHJcbiAgcHVzaCh0cmltbWVkKTtcclxuICBpZiAoIXRyaW1tZWQuZW5kc1dpdGgoJ+mnheWJjScpKSBwdXNoKGAke3RyaW1tZWR96aeF5YmNYCk7XHJcbiAgaWYgKCF0cmltbWVkLmVuZHNXaXRoKCfpp4UnKSkgcHVzaChgJHt0cmltbWVkfemnhWApO1xyXG4gIGlmICh0cmltbWVkLmVuZHNXaXRoKCfpp4XliY0nKSkgcHVzaCh0cmltbWVkLnNsaWNlKDAsIC0yKSk7XHJcbiAgaWYgKHRyaW1tZWQuZW5kc1dpdGgoJ+mnhScpKSBwdXNoKHRyaW1tZWQuc2xpY2UoMCwgLTEpKTtcclxuXHJcbiAgY29uc3QgbWF0Y2hlcyA9IG5ldyBNYXA8c3RyaW5nLCBQb2xlTWF0Y2g+KCk7XHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHRyaW1tZWQucmVwbGFjZSgvXFxzKy9nLCAnJyk7XHJcbiAgZm9yIChjb25zdCBxIG9mIHF1ZXJpZXMpIHtcclxuICAgIGNvbnN0IHBvbGVzID0gYXdhaXQgZmV0Y2hBbGxQYWdlcygnb2RwdDpCdXNzdG9wUG9sZScsIHtcclxuICAgICAgJ29kcHQ6b3BlcmF0b3InOiBUT0VJX09QRVJBVE9SLFxyXG4gICAgICAnZGM6dGl0bGUnOiBxLFxyXG4gICAgfSk7XHJcbiAgICBwb2xlcy5mb3JFYWNoKChwOiBhbnkpID0+IHtcclxuICAgICAgY29uc3QgdGl0bGUgPSBTdHJpbmcocFsnZGM6dGl0bGUnXSB8fCAnJykucmVwbGFjZSgvXFxzKy9nLCAnJyk7XHJcbiAgICAgIGlmICghdGl0bGUuaW5jbHVkZXMobm9ybWFsaXplZCkpIHJldHVybjtcclxuICAgICAgY29uc3QgaWQgPSBTdHJpbmcocFsnb3dsOnNhbWVBcyddIHx8IHBbJ0BpZCddIHx8ICcnKTtcclxuICAgICAgaWYgKCFpZCkgcmV0dXJuO1xyXG4gICAgICBjb25zdCBwYXR0ZXJucyA9IEFycmF5LmlzQXJyYXkocFsnb2RwdDpidXNyb3V0ZVBhdHRlcm4nXSlcclxuICAgICAgICA/IHBbJ29kcHQ6YnVzcm91dGVQYXR0ZXJuJ10ubWFwKCh2OiBhbnkpID0+IFN0cmluZyh2KSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgOiBbXTtcclxuICAgICAgaWYgKCFtYXRjaGVzLmhhcyhpZCkpIHtcclxuICAgICAgICBtYXRjaGVzLnNldChpZCwge1xyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICB0aXRsZTogU3RyaW5nKHBbJ2RjOnRpdGxlJ10gfHwgJycpLFxyXG4gICAgICAgICAgcGF0dGVybnMsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAocGF0dGVybnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gbWF0Y2hlcy5nZXQoaWQpO1xyXG4gICAgICAgIGV4aXN0aW5nPy5wYXR0ZXJucy5wdXNoKC4uLnBhdHRlcm5zKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAobWF0Y2hlcy5zaXplID09PSAwKSB7XHJcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0U3RvcExpc3QoKTtcclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRRdWVyeSA9IHRyaW1tZWQucmVwbGFjZSgvXFxzKy9nLCAnJyk7XHJcbiAgICBsaXN0XHJcbiAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0ubm9ybWFsaXplZC5pbmNsdWRlcyhub3JtYWxpemVTdG9wTmFtZUZvck1hdGNoKG5vcm1hbGl6ZWRRdWVyeSkpKVxyXG4gICAgICAuc2xpY2UoMCwgNTApXHJcbiAgICAgIC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgbWF0Y2hlcy5zZXQoaXRlbS5pZCwge1xyXG4gICAgICAgICAgaWQ6IGl0ZW0uaWQsXHJcbiAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcclxuICAgICAgICAgIHBhdHRlcm5zOiBpdGVtLnBhdHRlcm5zLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20obWF0Y2hlcy52YWx1ZXMoKSkubWFwKChtKSA9PiAoe1xyXG4gICAgLi4ubSxcclxuICAgIHBhdHRlcm5zOiBBcnJheS5mcm9tKG5ldyBTZXQobS5wYXR0ZXJucykpLFxyXG4gIH0pKTtcclxuICBwb2xlQ2FjaGUuc2V0KHRyaW1tZWQsIHsgZXhwaXJlczogRGF0ZS5ub3coKSArIFBPTEVfQ0FDSEVfVFRMX01TLCB2YWx1ZTogcmVzdWx0IH0pO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFN0b3BMaXN0KCk6IFByb21pc2U8QnVzU3RvcEVudHJ5W10+IHtcclxuICBpZiAoc3RvcExpc3RDYWNoZSAmJiBzdG9wTGlzdENhY2hlLmV4cGlyZXMgPiBEYXRlLm5vdygpKSByZXR1cm4gc3RvcExpc3RDYWNoZS52YWx1ZTtcclxuICBpZiAoIVRPS0VOKSByZXR1cm4gW107XHJcbiAgY29uc3QgcG9sZXMgPSBhd2FpdCBmZXRjaEFsbFBhZ2VzKCdvZHB0OkJ1c3N0b3BQb2xlJywgeyAnb2RwdDpvcGVyYXRvcic6IFRPRUlfT1BFUkFUT1IgfSk7XHJcbiAgY29uc3QgbGlzdCA9IHBvbGVzXHJcbiAgICAubWFwKChwOiBhbnkpID0+IHtcclxuICAgICAgY29uc3QgaWQgPSBTdHJpbmcocFsnb3dsOnNhbWVBcyddIHx8IHBbJ0BpZCddIHx8ICcnKTtcclxuICAgICAgY29uc3QgdGl0bGUgPSBTdHJpbmcocFsnZGM6dGl0bGUnXSB8fCAnJykudHJpbSgpO1xyXG4gICAgICBjb25zdCBwYXR0ZXJucyA9IEFycmF5LmlzQXJyYXkocFsnb2RwdDpidXNyb3V0ZVBhdHRlcm4nXSlcclxuICAgICAgICA/IHBbJ29kcHQ6YnVzcm91dGVQYXR0ZXJuJ10ubWFwKCh2OiBhbnkpID0+IFN0cmluZyh2KSkuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgICAgOiBbXTtcclxuICAgICAgaWYgKCFpZCB8fCAhdGl0bGUpIHJldHVybiBudWxsO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIHBhdHRlcm5zOiBBcnJheS5mcm9tKG5ldyBTZXQocGF0dGVybnMpKSxcclxuICAgICAgICBub3JtYWxpemVkOiBub3JtYWxpemVTdG9wTmFtZUZvck1hdGNoKHRpdGxlKSxcclxuICAgICAgfSBhcyBCdXNTdG9wRW50cnk7XHJcbiAgICB9KVxyXG4gICAgLmZpbHRlcihCb29sZWFuKSBhcyBCdXNTdG9wRW50cnlbXTtcclxuICBzdG9wTGlzdENhY2hlID0geyBleHBpcmVzOiBEYXRlLm5vdygpICsgU1RPUF9MSVNUX0NBQ0hFX1RUTF9NUywgdmFsdWU6IGxpc3QgfTtcclxuICByZXR1cm4gbGlzdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJ1c1N0b3BTdWdnZXN0aW9ucyhcclxuICBxdWVyeTogc3RyaW5nLFxyXG4gIGFuY2hvcj86IHN0cmluZyxcclxuICBsaW1pdCA9IDIwXHJcbik6IFByb21pc2U8QnVzU3RvcFN1Z2dlc3Rpb25bXT4ge1xyXG4gIGlmICghVE9LRU4pIHJldHVybiBbXTtcclxuICBjb25zdCB0cmltbWVkUXVlcnkgPSBxdWVyeS50cmltKCk7XHJcbiAgaWYgKCF0cmltbWVkUXVlcnkpIHJldHVybiBbXTtcclxuXHJcbiAgY29uc3QgbGlzdCA9IGF3YWl0IGdldFN0b3BMaXN0KCk7XHJcbiAgbGV0IGZpbHRlcmVkID0gbGlzdDtcclxuXHJcbiAgY29uc3QgYW5jaG9yVHJpbW1lZCA9IFN0cmluZyhhbmNob3IgfHwgJycpLnRyaW0oKTtcclxuICBpZiAoYW5jaG9yVHJpbW1lZCkge1xyXG4gICAgY29uc3QgYW5jaG9yUGF0dGVybnMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgIGNvbnN0IGFuY2hvck5vcm1hbGl6ZWQgPSBub3JtYWxpemVTdG9wTmFtZUZvck1hdGNoKGFuY2hvclRyaW1tZWQpO1xyXG5cclxuICAgIGxpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoaXRlbS5ub3JtYWxpemVkLmluY2x1ZGVzKGFuY2hvck5vcm1hbGl6ZWQpKSB7XHJcbiAgICAgICAgaXRlbS5wYXR0ZXJucy5mb3JFYWNoKChwKSA9PiBhbmNob3JQYXR0ZXJucy5hZGQocCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBhbmNob3JNYXRjaGVzID0gYXdhaXQgZ2V0UG9sZU1hdGNoZXNCeU5hbWUoYW5jaG9yVHJpbW1lZCk7XHJcbiAgICBhbmNob3JNYXRjaGVzLmZvckVhY2goKG1hdGNoKSA9PiBtYXRjaC5wYXR0ZXJucy5mb3JFYWNoKChwKSA9PiBhbmNob3JQYXR0ZXJucy5hZGQocCkpKTtcclxuXHJcbiAgICBpZiAoYW5jaG9yUGF0dGVybnMuc2l6ZSA+IDApIHtcclxuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0ucGF0dGVybnMuc29tZSgocCkgPT4gYW5jaG9yUGF0dGVybnMuaGFzKHApKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSBub3JtYWxpemVTdG9wTmFtZUZvck1hdGNoKHRyaW1tZWRRdWVyeSk7XHJcbiAgY29uc3Qgc2NvcmVkID0gZmlsdGVyZWRcclxuICAgIC5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgbmFtZSA9IGl0ZW0ubm9ybWFsaXplZDtcclxuICAgICAgaWYgKCFuYW1lLmluY2x1ZGVzKG5vcm1hbGl6ZWRRdWVyeSkpIHJldHVybiBudWxsO1xyXG4gICAgICBjb25zdCBzdGFydHMgPSBuYW1lLnN0YXJ0c1dpdGgobm9ybWFsaXplZFF1ZXJ5KTtcclxuICAgICAgY29uc3Qgc2NvcmUgPSBzdGFydHMgPyAwIDogMTtcclxuICAgICAgcmV0dXJuIHsgaXRlbSwgc2NvcmUgfTtcclxuICAgIH0pXHJcbiAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIEFycmF5PHsgaXRlbTogQnVzU3RvcEVudHJ5OyBzY29yZTogbnVtYmVyIH0+O1xyXG5cclxuICBzY29yZWQuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgaWYgKGEuc2NvcmUgIT09IGIuc2NvcmUpIHJldHVybiBhLnNjb3JlIC0gYi5zY29yZTtcclxuICAgIGlmIChhLml0ZW0udGl0bGUubGVuZ3RoICE9PSBiLml0ZW0udGl0bGUubGVuZ3RoKSByZXR1cm4gYS5pdGVtLnRpdGxlLmxlbmd0aCAtIGIuaXRlbS50aXRsZS5sZW5ndGg7XHJcbiAgICByZXR1cm4gYS5pdGVtLnRpdGxlLmxvY2FsZUNvbXBhcmUoYi5pdGVtLnRpdGxlLCAnamEnKTtcclxuICB9KTtcclxuXHJcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gIGNvbnN0IHJlc3VsdHM6IEJ1c1N0b3BTdWdnZXN0aW9uW10gPSBbXTtcclxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNjb3JlZCkge1xyXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoID49IGxpbWl0KSBicmVhaztcclxuICAgIGlmIChzZWVuLmhhcyhlbnRyeS5pdGVtLnRpdGxlKSkgY29udGludWU7XHJcbiAgICBzZWVuLmFkZChlbnRyeS5pdGVtLnRpdGxlKTtcclxuICAgIHJlc3VsdHMucHVzaCh7IGlkOiBlbnRyeS5pdGVtLmlkLCB0aXRsZTogZW50cnkuaXRlbS50aXRsZSB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0Um91dGVOYW1lKHR0OiBhbnksIHBhdHRlcm5JZDogc3RyaW5nLCByb3V0ZUlkOiBzdHJpbmcsIGZhbGxiYWNrPzogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIFN0cmluZyh0dFsnZGM6dGl0bGUnXSB8fCBmYWxsYmFjayB8fCByb3V0ZUlkIHx8IHBhdHRlcm5JZCB8fCAnJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmlwQnJhbmNoRnJvbVBhdHRlcm4ocGF0dGVybklkOiBzdHJpbmcpIHtcclxuICByZXR1cm4gU3RyaW5nKHBhdHRlcm5JZCB8fCAnJykucmVwbGFjZSgvXFwuW14uXSskLywgJycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdHJpcEJyYW5jaEZyb21Sb3V0ZU5hbWUocm91dGVOYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCB0cmltbWVkID0gU3RyaW5nKHJvdXRlTmFtZSB8fCAnJykudHJpbSgpO1xyXG4gIGlmICghdHJpbW1lZCkgcmV0dXJuICcnO1xyXG4gIHJldHVybiB0cmltbWVkLnJlcGxhY2UoL1st4oCQ4oCR4oCT4oCUXT9cXGQrJC8sICcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRSb3V0ZUtleShyb3V0ZU5hbWU6IHN0cmluZywgcm91dGVJZDogc3RyaW5nLCBwYXR0ZXJuSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGJhc2VOYW1lID0gc3RyaXBCcmFuY2hGcm9tUm91dGVOYW1lKHJvdXRlTmFtZSk7XHJcbiAgaWYgKGJhc2VOYW1lKSByZXR1cm4gYmFzZU5hbWU7XHJcbiAgY29uc3QgYmFzZVBhdHRlcm4gPSBzdHJpcEJyYW5jaEZyb21QYXR0ZXJuKHBhdHRlcm5JZCk7XHJcbiAgaWYgKGJhc2VQYXR0ZXJuKSByZXR1cm4gYmFzZVBhdHRlcm47XHJcbiAgaWYgKHJvdXRlSWQpIHJldHVybiByb3V0ZUlkO1xyXG4gIHJldHVybiByb3V0ZU5hbWUgfHwgcGF0dGVybklkO1xyXG59XHJcblxyXG50eXBlIE9jY3VwYW5jeUluZGV4ID0ge1xyXG4gIGJ5Um91dGVTYW1wbGVzOiBNYXA8c3RyaW5nLCBPY2N1cGFuY3lTYW1wbGVbXT47XHJcbiAgc2FtcGxlQnVzZXM6IGFueVtdO1xyXG4gIGRlbGF5QnlSb3V0ZTogTWFwPHN0cmluZywgbnVtYmVyPjtcclxuICB0dXJuYXJvdW5kQnlSb3V0ZVN0b3A6IE1hcDxzdHJpbmcsIHsgZXBvY2g6IG51bWJlcjsgdHM6IG51bWJlciB9PjtcclxufTtcclxuXHJcbnR5cGUgT2NjdXBhbmN5U2FtcGxlID0ge1xyXG4gIHRzOiBudW1iZXI7XHJcbiAgdGV4dDogc3RyaW5nIHwgbnVsbDtcclxuICByYXRpbzogbnVtYmVyIHwgbnVsbDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3REZXN0aW5hdGlvbkNhbmRpZGF0ZShidXM6IGFueSkge1xyXG4gIGNvbnN0IGRpcmVjdCA9XHJcbiAgICBidXNbJ29kcHQ6ZGVzdGluYXRpb25TaWduJ10gfHxcclxuICAgIGJ1c1snb2RwdDpkZXN0aW5hdGlvbiddIHx8XHJcbiAgICBidXNbJ29kcHQ6ZGVzdGluYXRpb25TaWduVGV4dCddIHx8XHJcbiAgICAnJztcclxuICBpZiAoZGlyZWN0ICE9PSBudWxsICYmIGRpcmVjdCAhPT0gdW5kZWZpbmVkICYmIGRpcmVjdCAhPT0gJycpIHJldHVybiBTdHJpbmcoZGlyZWN0KTtcclxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhidXMgfHwge30pKSB7XHJcbiAgICBpZiAoIS9kZXN0aW5hdGlvbi9pLnRlc3Qoa2V5KSkgY29udGludWU7XHJcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgY29udGludWU7XHJcbiAgICBjb25zdCBzdHIgPSBTdHJpbmcodmFsdWUpLnRyaW0oKTtcclxuICAgIGlmIChzdHIpIHJldHVybiBzdHI7XHJcbiAgfVxyXG4gIHJldHVybiAnJztcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdFByZWRpY3RlZEFycml2YWxFcG9jaChidXM6IGFueSkge1xyXG4gIGNvbnN0IGNhbmRpZGF0ZSA9XHJcbiAgICBidXNbJ29kcHQ6cHJlZGljdGVkQXJyaXZhbFRpbWUnXSB8fFxyXG4gICAgYnVzWydvZHB0OnByZWRpY3RlZERlcGFydHVyZVRpbWUnXSB8fFxyXG4gICAgYnVzWydvZHB0OmFycml2YWxUaW1lJ10gfHxcclxuICAgIGJ1c1snb2RwdDpkZXBhcnR1cmVUaW1lJ10gfHxcclxuICAgICcnO1xyXG4gIGNvbnN0IHRzID0gRGF0ZS5wYXJzZShTdHJpbmcoY2FuZGlkYXRlIHx8ICcnKSk7XHJcbiAgcmV0dXJuIE51bWJlci5pc05hTih0cykgPyAwIDogdHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFJvdXRlTmFtZVdpdGhEZXN0aW5hdGlvbihyb3V0ZU5hbWU6IHN0cmluZywgZGVzdFN0b3BOYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBiYXNlID0gU3RyaW5nKHJvdXRlTmFtZSB8fCAnJykudHJpbSgpO1xyXG4gIGNvbnN0IGRlc3QgPSBTdHJpbmcoZGVzdFN0b3BOYW1lIHx8ICcnKS50cmltKCk7XHJcbiAgaWYgKCFkZXN0KSByZXR1cm4gYmFzZTtcclxuICBpZiAoIWJhc2UpIHJldHVybiBkZXN0O1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWRCYXNlID0gbm9ybWFsaXplVGV4dChiYXNlKTtcclxuICBjb25zdCBub3JtYWxpemVkRGVzdCA9IG5vcm1hbGl6ZVRleHQoZGVzdCk7XHJcbiAgaWYgKG5vcm1hbGl6ZWRCYXNlLmluY2x1ZGVzKG5vcm1hbGl6ZWREZXN0KSkgcmV0dXJuIGJhc2U7XHJcbiAgcmV0dXJuIGAke2Jhc2V9ICgke2Rlc3R9KWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RPY2N1cGFuY3lDYW5kaWRhdGUoYnVzOiBhbnkpIHtcclxuICBjb25zdCBkaXJlY3QgPVxyXG4gICAgYnVzWydvZHB0Om9jY3VwYW5jeSddIHx8XHJcbiAgICBidXNbJ29kcHQ6b2NjdXBhbmN5U3RhdHVzJ10gfHxcclxuICAgIGJ1c1snb2RwdDpleHQ6b2NjdXBhbmN5J10gfHxcclxuICAgIGJ1c1snb2RwdDpleHQ6b2NjdXBhbmN5U3RhdHVzJ10gfHxcclxuICAgICcnO1xyXG4gIGlmIChkaXJlY3QgIT09IG51bGwgJiYgZGlyZWN0ICE9PSB1bmRlZmluZWQgJiYgZGlyZWN0ICE9PSAnJykgcmV0dXJuIFN0cmluZyhkaXJlY3QpO1xyXG5cclxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhidXMgfHwge30pKSB7XHJcbiAgICBpZiAoIS9vY2N1cGFuY3l8Y3Jvd2R8Y29uZ2VzdGlvbi9pLnRlc3Qoa2V5KSkgY29udGludWU7XHJcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgY29udGludWU7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGNvbnN0IHN0ciA9IFN0cmluZyh2YWx1ZSkudHJpbSgpO1xyXG4gICAgICBpZiAoc3RyKSByZXR1cm4gc3RyO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gJyc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RCdXNUaW1lc3RhbXAoYnVzOiBhbnkpIHtcclxuICBjb25zdCBjYW5kaWRhdGUgPVxyXG4gICAgYnVzWydkYzpkYXRlJ10gfHxcclxuICAgIGJ1c1snZGN0ZXJtczpjcmVhdGVkJ10gfHxcclxuICAgIGJ1c1snZGN0ZXJtczptb2RpZmllZCddIHx8XHJcbiAgICBidXNbJ29kcHQ6ZGF0ZSddIHx8XHJcbiAgICBidXNbJ29kcHQ6dGltZSddIHx8XHJcbiAgICAnJztcclxuICBjb25zdCB0cyA9IERhdGUucGFyc2UoU3RyaW5nKGNhbmRpZGF0ZSB8fCAnJykpO1xyXG4gIHJldHVybiBOdW1iZXIuaXNOYU4odHMpID8gMCA6IHRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvY2N1cGFuY3lSYXRpb0Zyb21UZXh0KHZhbHVlOiBzdHJpbmcpIHtcclxuICBjb25zdCBtYXRjaCA9IFN0cmluZyh2YWx1ZSB8fCAnJykubWF0Y2goLyhcXGR7MSwzfSkvKTtcclxuICBpZiAobWF0Y2gpIHtcclxuICAgIGNvbnN0IG51bSA9IE51bWJlcihtYXRjaFsxXSk7XHJcbiAgICBpZiAoIU51bWJlci5pc05hTihudW0pKSByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBudW0pKTtcclxuICB9XHJcbiAgY29uc3QgbG93ZXIgPSBTdHJpbmcodmFsdWUgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgaWYgKGxvd2VyLmluY2x1ZGVzKCfmuoAnKSB8fCBsb3dlci5pbmNsdWRlcygnZnVsbCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdoaWdoJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2Nyb3dkJykpIHJldHVybiA4NTtcclxuICBpZiAobG93ZXIuaW5jbHVkZXMoJ+WkmicpIHx8IGxvd2VyLmluY2x1ZGVzKCdtZWRpdW0nKSB8fCBsb3dlci5pbmNsdWRlcygnbm9ybWFsJykpIHJldHVybiA1NTtcclxuICBpZiAobG93ZXIuaW5jbHVkZXMoJ+WwkScpIHx8IGxvd2VyLmluY2x1ZGVzKCdsb3cnKSB8fCBsb3dlci5pbmNsdWRlcygnZW1wdHknKSkgcmV0dXJuIDI1O1xyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvY2N1cGFuY3lMZXZlbEZyb21SYXRpbyhyYXRpbzogbnVtYmVyIHwgbnVsbCkge1xyXG4gIGlmIChyYXRpbyA9PT0gbnVsbCB8fCBOdW1iZXIuaXNOYU4ocmF0aW8pKSByZXR1cm4gJ3Vua25vd24nIGFzIGNvbnN0O1xyXG4gIGlmIChyYXRpbyA+PSA3MCkgcmV0dXJuICdoaWdoJyBhcyBjb25zdDtcclxuICBpZiAocmF0aW8gPj0gNDApIHJldHVybiAnbWVkaXVtJyBhcyBjb25zdDtcclxuICByZXR1cm4gJ2xvdycgYXMgY29uc3Q7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkT2NjdXBhbmN5SW5kZXgoKSB7XHJcbiAgaWYgKG9jY3VwYW5jeUNhY2hlICYmIG9jY3VwYW5jeUNhY2hlLmV4cGlyZXMgPiBEYXRlLm5vdygpKSByZXR1cm4gb2NjdXBhbmN5Q2FjaGUudmFsdWU7XHJcbiAgY29uc3QgYnVzZXMgPSBhd2FpdCBmZXRjaEFsbFBhZ2VzKCdvZHB0OkJ1cycsIHsgJ29kcHQ6b3BlcmF0b3InOiBUT0VJX09QRVJBVE9SIH0pO1xyXG4gIGNvbnN0IGJ5Um91dGVTYW1wbGVzID0gbmV3IE1hcDxzdHJpbmcsIE9jY3VwYW5jeVNhbXBsZVtdPigpO1xyXG4gIGNvbnN0IGRlbGF5QnlSb3V0ZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGRlbGF5U2VjOiBudW1iZXI7IHRzOiBudW1iZXIgfT4oKTtcclxuICBjb25zdCB0dXJuYXJvdW5kQnlSb3V0ZVN0b3AgPSBuZXcgTWFwPHN0cmluZywgeyBlcG9jaDogbnVtYmVyOyB0czogbnVtYmVyIH0+KCk7XHJcbiAgYnVzZXMuZm9yRWFjaCgoYjogYW55KSA9PiB7XHJcbiAgICBjb25zdCByb3V0ZUlkID0gU3RyaW5nKGJbJ29kcHQ6YnVzcm91dGUnXSB8fCAnJyk7XHJcbiAgICBjb25zdCBwYXR0ZXJuSWQgPSBTdHJpbmcoYlsnb2RwdDpidXNyb3V0ZVBhdHRlcm4nXSB8fCAnJyk7XHJcbiAgICBpZiAoIXJvdXRlSWQgJiYgIXBhdHRlcm5JZCkgcmV0dXJuO1xyXG4gICAgY29uc3QgdHMgPSBleHRyYWN0QnVzVGltZXN0YW1wKGIpO1xyXG4gICAgY29uc3QgcHJlZGljdGVkRXBvY2ggPSBleHRyYWN0UHJlZGljdGVkQXJyaXZhbEVwb2NoKGIpO1xyXG4gICAgY29uc3QgZGVzdGluYXRpb25UZXh0ID0gZXh0cmFjdERlc3RpbmF0aW9uQ2FuZGlkYXRlKGIpO1xyXG4gICAgY29uc3QgZGVsYXlSYXcgPSBOdW1iZXIoYlsnb2RwdDpkZWxheSddID8/IDApO1xyXG4gICAgY29uc3QgZGVsYXlTZWMgPSBOdW1iZXIuaXNGaW5pdGUoZGVsYXlSYXcpID8gTWF0aC5tYXgoMCwgZGVsYXlSYXcpIDogMDtcclxuICAgIGNvbnN0IGRlbGF5S2V5ID0gcm91dGVJZCB8fCBwYXR0ZXJuSWQ7XHJcbiAgICBjb25zdCBkZWxheUV4aXN0aW5nID0gZGVsYXlCeVJvdXRlLmdldChkZWxheUtleSk7XHJcbiAgICBpZiAoIWRlbGF5RXhpc3RpbmcgfHwgdHMgPj0gZGVsYXlFeGlzdGluZy50cykge1xyXG4gICAgICBkZWxheUJ5Um91dGUuc2V0KGRlbGF5S2V5LCB7IGRlbGF5U2VjLCB0cyB9KTtcclxuICAgIH1cclxuICAgIGlmIChwcmVkaWN0ZWRFcG9jaCAmJiBkZXN0aW5hdGlvblRleHQpIHtcclxuICAgICAgY29uc3Qgbm9ybWFsaXplZERlc3QgPSBub3JtYWxpemVTdG9wTmFtZUZvck1hdGNoKGRlc3RpbmF0aW9uVGV4dCk7XHJcbiAgICAgIGNvbnN0IHR1cm5LZXkgPSBgJHtkZWxheUtleX1fXyR7bm9ybWFsaXplZERlc3R9YDtcclxuICAgICAgY29uc3QgZXhpc3RpbmcgPSB0dXJuYXJvdW5kQnlSb3V0ZVN0b3AuZ2V0KHR1cm5LZXkpO1xyXG4gICAgICBpZiAoIWV4aXN0aW5nIHx8IHRzID49IGV4aXN0aW5nLnRzKSB7XHJcbiAgICAgICAgdHVybmFyb3VuZEJ5Um91dGVTdG9wLnNldCh0dXJuS2V5LCB7IGVwb2NoOiBwcmVkaWN0ZWRFcG9jaCwgdHMgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IG9jY3VwYW5jeSA9IGV4dHJhY3RPY2N1cGFuY3lDYW5kaWRhdGUoYik7XHJcbiAgICBpZiAoIW9jY3VwYW5jeSkgcmV0dXJuO1xyXG4gICAgY29uc3QgcmF0aW8gPSBvY2N1cGFuY3lSYXRpb0Zyb21UZXh0KG9jY3VwYW5jeSk7XHJcbiAgICBpZiAocm91dGVJZCkge1xyXG4gICAgICBpZiAoIWJ5Um91dGVTYW1wbGVzLmhhcyhyb3V0ZUlkKSkgYnlSb3V0ZVNhbXBsZXMuc2V0KHJvdXRlSWQsIFtdKTtcclxuICAgICAgYnlSb3V0ZVNhbXBsZXMuZ2V0KHJvdXRlSWQpPy5wdXNoKHsgdHMsIHRleHQ6IG9jY3VwYW5jeSwgcmF0aW8gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocGF0dGVybklkKSB7XHJcbiAgICAgIGlmICghYnlSb3V0ZVNhbXBsZXMuaGFzKHBhdHRlcm5JZCkpIGJ5Um91dGVTYW1wbGVzLnNldChwYXR0ZXJuSWQsIFtdKTtcclxuICAgICAgYnlSb3V0ZVNhbXBsZXMuZ2V0KHBhdHRlcm5JZCk/LnB1c2goeyB0cywgdGV4dDogb2NjdXBhbmN5LCByYXRpbyB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgYnlSb3V0ZVNhbXBsZXMuZm9yRWFjaCgoc2FtcGxlcykgPT4gc2FtcGxlcy5zb3J0KChhLCBiKSA9PiBhLnRzIC0gYi50cykpO1xyXG4gIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgIGJ5Um91dGVTYW1wbGVzLFxyXG4gICAgc2FtcGxlQnVzZXM6IGJ1c2VzLnNsaWNlKDAsIDUpLFxyXG4gICAgZGVsYXlCeVJvdXRlOiBuZXcgTWFwKFxyXG4gICAgICBBcnJheS5mcm9tKGRlbGF5QnlSb3V0ZS5lbnRyaWVzKCkpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBba2V5LCB2YWx1ZS5kZWxheVNlY10pXHJcbiAgICApLFxyXG4gICAgdHVybmFyb3VuZEJ5Um91dGVTdG9wLFxyXG4gIH0gYXMgT2NjdXBhbmN5SW5kZXg7XHJcbiAgb2NjdXBhbmN5Q2FjaGUgPSB7IGV4cGlyZXM6IERhdGUubm93KCkgKyBPQ0NVUEFOQ1lfQ0FDSEVfVFRMX01TLCB2YWx1ZTogcmVzdWx0IH07XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9jY3VwYW5jeVNhbXBsZVN0YXRzKHJvdXRlSWRzOiBzdHJpbmdbXSwgcGF0dGVybklkczogc3RyaW5nW10pIHtcclxuICBjb25zdCBpbmRleCA9IGF3YWl0IGJ1aWxkT2NjdXBhbmN5SW5kZXgoKTtcclxuICBjb25zdCB1bmlxUm91dGVJZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQocm91dGVJZHMuZmlsdGVyKEJvb2xlYW4pKSk7XHJcbiAgY29uc3QgdW5pcVBhdHRlcm5JZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQocGF0dGVybklkcy5maWx0ZXIoQm9vbGVhbikpKTtcclxuXHJcbiAgY29uc3Qgcm91dGVDb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuICB1bmlxUm91dGVJZHMuZm9yRWFjaCgoaWQpID0+IHtcclxuICAgIHJvdXRlQ291bnRzW2lkXSA9IGluZGV4LmJ5Um91dGVTYW1wbGVzLmdldChpZCk/Lmxlbmd0aCB8fCAwO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBwYXR0ZXJuQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XHJcbiAgdW5pcVBhdHRlcm5JZHMuZm9yRWFjaCgoaWQpID0+IHtcclxuICAgIHBhdHRlcm5Db3VudHNbaWRdID0gaW5kZXguYnlSb3V0ZVNhbXBsZXMuZ2V0KGlkKT8ubGVuZ3RoIHx8IDA7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByb3V0ZUNvdW50cyxcclxuICAgIHBhdHRlcm5Db3VudHMsXHJcbiAgICB0b3RhbFNhbXBsZXM6IEFycmF5LmZyb20oaW5kZXguYnlSb3V0ZVNhbXBsZXMudmFsdWVzKCkpLnJlZHVjZSgoc3VtLCBpdGVtcykgPT4gc3VtICsgaXRlbXMubGVuZ3RoLCAwKSxcclxuICB9O1xyXG59XHJcblxyXG50eXBlIEludGVybmFsQXJyaXZhbCA9IEJ1c0Fycml2YWwgJiB7XHJcbiAgcm91dGVLZXk6IHN0cmluZztcclxuICBzdGF0dXNJc0xhc3Q6IGJvb2xlYW47XHJcbn07XHJcblxyXG5mdW5jdGlvbiBkZWR1cGVEZXBhcnR1cmVzKGRlcGFydHVyZXM6IEludGVybmFsQXJyaXZhbFtdKSB7XHJcbiAgY29uc3QgYnlSb3V0ZSA9IG5ldyBNYXA8c3RyaW5nLCBJbnRlcm5hbEFycml2YWxbXT4oKTtcclxuICBkZXBhcnR1cmVzLmZvckVhY2goKGQpID0+IHtcclxuICAgIGlmICghYnlSb3V0ZS5oYXMoZC5yb3V0ZUtleSkpIGJ5Um91dGUuc2V0KGQucm91dGVLZXksIFtdKTtcclxuICAgIGJ5Um91dGUuZ2V0KGQucm91dGVLZXkpPy5wdXNoKGQpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBtZXJnZWQ6IEludGVybmFsQXJyaXZhbFtdID0gW107XHJcbiAgYnlSb3V0ZS5mb3JFYWNoKChpdGVtcykgPT4ge1xyXG4gICAgaXRlbXMuc29ydCgoYSwgYikgPT4gYS5kZXBhcnR1cmVFcG9jaCAtIGIuZGVwYXJ0dXJlRXBvY2gpO1xyXG4gICAgY29uc3QgcmVkdWNlZDogSW50ZXJuYWxBcnJpdmFsW10gPSBbXTtcclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgcHJldiA9IHJlZHVjZWRbcmVkdWNlZC5sZW5ndGggLSAxXTtcclxuICAgICAgaWYgKHByZXYgJiYgaXRlbS5kZXBhcnR1cmVFcG9jaCAtIHByZXYuZGVwYXJ0dXJlRXBvY2ggPD0gMyAqIDYwICogMTAwMCkge1xyXG4gICAgICAgIHJlZHVjZWRbcmVkdWNlZC5sZW5ndGggLSAxXSA9IGl0ZW07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVkdWNlZC5wdXNoKGl0ZW0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIG1lcmdlZC5wdXNoKC4uLnJlZHVjZWQpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gbWVyZ2VkO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmV4dEJ1c2VzKG9yaWdpblN0b3BOYW1lOiBzdHJpbmcsIGRlc3RTdG9wTmFtZTogc3RyaW5nKTogUHJvbWlzZTxCdXNBcnJpdmFsW10+IHtcclxuICBpZiAoIVRPS0VOKSB0aHJvdyBuZXcgRXJyb3IoJ09EUFRfVE9LRU4gaXMgbm90IHNldCcpO1xyXG5cclxuICBjb25zdCBbb3JpZ2luUG9sZXMsIGRlc3RQb2xlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBnZXRQb2xlTWF0Y2hlc0J5TmFtZShvcmlnaW5TdG9wTmFtZSksXHJcbiAgICBnZXRQb2xlTWF0Y2hlc0J5TmFtZShkZXN0U3RvcE5hbWUpLFxyXG4gIF0pO1xyXG4gIGNvbnN0IG9yaWdpblBvbGVOYW1lTWFwID0gbmV3IE1hcChvcmlnaW5Qb2xlcy5tYXAoKHApID0+IFtwLmlkLCBwLnRpdGxlXSkpO1xyXG4gIGNvbnN0IG9yaWdpbklkcyA9IG9yaWdpblBvbGVzLm1hcCgocCkgPT4gcC5pZCk7XHJcbiAgY29uc3QgZGVzdElkcyA9IGRlc3RQb2xlcy5tYXAoKHApID0+IHAuaWQpO1xyXG4gIGlmIChvcmlnaW5JZHMubGVuZ3RoID09PSAwIHx8IGRlc3RJZHMubGVuZ3RoID09PSAwKSByZXR1cm4gW107XHJcblxyXG4gIGNvbnN0IG9yaWdpbk5hbWVzID0gYnVpbGROYW1lVmFyaWFudHMob3JpZ2luU3RvcE5hbWUsIG9yaWdpblBvbGVzKTtcclxuICBjb25zdCBkZXN0TmFtZXMgPSBidWlsZE5hbWVWYXJpYW50cyhkZXN0U3RvcE5hbWUsIGRlc3RQb2xlcyk7XHJcblxyXG4gIGNvbnN0IGNhY2hlZFBhdHRlcm5zID0gcGF0dGVybkNhY2hlICYmIHBhdHRlcm5DYWNoZS5leHBpcmVzID4gRGF0ZS5ub3coKSA/IHBhdHRlcm5DYWNoZS52YWx1ZSA6IG51bGw7XHJcbiAgY29uc3QgW3BhdHRlcm5zLCBvY2N1cGFuY3lJbmRleF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBjYWNoZWRQYXR0ZXJucyA/IFByb21pc2UucmVzb2x2ZShjYWNoZWRQYXR0ZXJucykgOiBmZXRjaEFsbFBhZ2VzKCdvZHB0OkJ1c3JvdXRlUGF0dGVybicsIHsgJ29kcHQ6b3BlcmF0b3InOiBUT0VJX09QRVJBVE9SIH0pLFxyXG4gICAgYnVpbGRPY2N1cGFuY3lJbmRleCgpLFxyXG4gIF0pO1xyXG4gIGlmICghY2FjaGVkUGF0dGVybnMpIHtcclxuICAgIHBhdHRlcm5DYWNoZSA9IHsgZXhwaXJlczogRGF0ZS5ub3coKSArIFBBVFRFUk5fQ0FDSEVfVFRMX01TLCB2YWx1ZTogcGF0dGVybnMgfTtcclxuICB9XHJcbiAgY29uc3QgY2FuZGlkYXRlUGF0dGVybnM6IEFycmF5PHsgcGF0dGVybklkOiBzdHJpbmc7IGJ1c3JvdXRlOiBzdHJpbmc7IHRpdGxlOiBzdHJpbmcgfT4gPSBbXTtcclxuICBwYXR0ZXJucy5mb3JFYWNoKChwOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IHBhdHRlcm5JZCA9IFN0cmluZyhwWydvd2w6c2FtZUFzJ10gfHwgcFsnQGlkJ10gfHwgJycpO1xyXG4gICAgaWYgKCFwYXR0ZXJuSWQpIHJldHVybjtcclxuICAgIGNvbnN0IG9yZGVycyA9IEFycmF5LmlzQXJyYXkocFsnb2RwdDpidXNzdG9wUG9sZU9yZGVyJ10pID8gcFsnb2RwdDpidXNzdG9wUG9sZU9yZGVyJ10gOiBbXTtcclxuICAgIGxldCBvcmlnaW5JZHggPSAtMTtcclxuICAgIGxldCBkZXN0SWR4ID0gLTE7XHJcbiAgICBvcmRlcnMuZm9yRWFjaCgobzogYW55LCBpZHg6IG51bWJlcikgPT4ge1xyXG4gICAgICBjb25zdCBwb2xlID0gU3RyaW5nKG9bJ29kcHQ6YnVzc3RvcFBvbGUnXSB8fCAnJyk7XHJcbiAgICAgIGNvbnN0IG5vdGUgPSBnZXRTdG9wTmFtZShTdHJpbmcob1snb2RwdDpub3RlJ10gfHwgJycpKTtcclxuICAgICAgaWYgKG9yaWdpbklkeCA8IDAgJiYgKG9yaWdpbklkcy5sZW5ndGggPiAwID8gb3JpZ2luSWRzLmluY2x1ZGVzKHBvbGUpIDogbm90ZU1hdGNoZXNOYW1lcyhub3RlLCBvcmlnaW5OYW1lcykpKSB7XHJcbiAgICAgICAgb3JpZ2luSWR4ID0gaWR4O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChkZXN0SWR4IDwgMCAmJiAoZGVzdElkcy5sZW5ndGggPiAwID8gZGVzdElkcy5pbmNsdWRlcyhwb2xlKSA6IG5vdGVNYXRjaGVzTmFtZXMobm90ZSwgZGVzdE5hbWVzKSkpIHtcclxuICAgICAgICBkZXN0SWR4ID0gaWR4O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmIChvcmlnaW5JZHggPj0gMCAmJiBkZXN0SWR4ID49IDAgJiYgb3JpZ2luSWR4IDwgZGVzdElkeCkge1xyXG4gICAgICBjYW5kaWRhdGVQYXR0ZXJucy5wdXNoKHtcclxuICAgICAgICBwYXR0ZXJuSWQsXHJcbiAgICAgICAgYnVzcm91dGU6IFN0cmluZyhwWydvZHB0OmJ1c3JvdXRlJ10gfHwgJycpLFxyXG4gICAgICAgIHRpdGxlOiBTdHJpbmcocFsnZGM6dGl0bGUnXSB8fCAnJyksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGlmIChjYW5kaWRhdGVQYXR0ZXJucy5sZW5ndGggPT09IDApIHJldHVybiBbXTtcclxuXHJcbiAgY29uc3QgZGVwYXJ0dXJlczogSW50ZXJuYWxBcnJpdmFsW10gPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGNhbmRpZGF0ZVBhdHRlcm5zKSB7XHJcbiAgICBjb25zdCBwYXR0ZXJuSWQgPSBwYXR0ZXJuLnBhdHRlcm5JZDtcclxuICAgIGNvbnN0IHJvdXRlSWQgPSBwYXR0ZXJuLmJ1c3JvdXRlIHx8IGluZmVyQnVzcm91dGVJZChwYXR0ZXJuSWQpO1xyXG4gICAgbGV0IHRpbWV0YWJsZXMgPSBhd2FpdCBmZXRjaEFsbFBhZ2VzKCdvZHB0OkJ1c1RpbWV0YWJsZScsIHtcclxuICAgICAgJ29kcHQ6YnVzcm91dGVQYXR0ZXJuJzogcGF0dGVybklkLFxyXG4gICAgfSk7XHJcbiAgICBpZiAodGltZXRhYmxlcy5sZW5ndGggPT09IDAgJiYgcm91dGVJZCkge1xyXG4gICAgICB0aW1ldGFibGVzID0gYXdhaXQgZmV0Y2hBbGxQYWdlcygnb2RwdDpCdXNUaW1ldGFibGUnLCB7XHJcbiAgICAgICAgJ29kcHQ6YnVzcm91dGUnOiByb3V0ZUlkLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IHR0IG9mIHRpbWV0YWJsZXMpIHtcclxuICAgICAgY29uc3Qgc3RvcHMgPSBzdG9wc0Zyb21UaW1ldGFibGUodHQpO1xyXG4gICAgICBjb25zdCBvcmlnaW5JZHggPSBmaW5kU3RvcEluZGV4KHN0b3BzLCBvcmlnaW5JZHMsIG9yaWdpbk5hbWVzKTtcclxuICAgICAgY29uc3QgZGVzdElkeCA9IGZpbmRTdG9wSW5kZXgoc3RvcHMsIGRlc3RJZHMsIGRlc3ROYW1lcyk7XHJcbiAgICAgIGlmIChvcmlnaW5JZHggPCAwIHx8IGRlc3RJZHggPCAwIHx8IG9yaWdpbklkeCA+PSBkZXN0SWR4KSBjb250aW51ZTtcclxuXHJcbiAgICAgIGNvbnN0IHN0b3AgPSBzdG9wc1tvcmlnaW5JZHhdO1xyXG4gICAgICBjb25zdCBvcmlnaW5Qb2xlTmFtZSA9IG9yaWdpblBvbGVOYW1lTWFwLmdldChzdG9wLnBvbGUpIHx8IHN0b3Aubm90ZSB8fCBvcmlnaW5TdG9wTmFtZTtcclxuICAgICAgY29uc3QgdGltZVN0ciA9IHN0b3AuZGVwYXJ0dXJlVGltZSB8fCBzdG9wLmFycml2YWxUaW1lO1xyXG4gICAgICBpZiAoIXRpbWVTdHIpIGNvbnRpbnVlO1xyXG4gICAgICBjb25zdCBzY2hlZHVsZWREYXRlID0gcGFyc2VUaW1lVG9EYXRlKHRpbWVTdHIsIHN0b3AuaXNNaWRuaWdodCk7XHJcbiAgICAgIGlmICghc2NoZWR1bGVkRGF0ZSkgY29udGludWU7XHJcblxyXG4gICAgICBjb25zdCBkZWxheVNlYyA9XHJcbiAgICAgICAgKHJvdXRlSWQgJiYgb2NjdXBhbmN5SW5kZXguZGVsYXlCeVJvdXRlLmdldChyb3V0ZUlkKSkgfHxcclxuICAgICAgICBvY2N1cGFuY3lJbmRleC5kZWxheUJ5Um91dGUuZ2V0KHBhdHRlcm5JZCkgfHxcclxuICAgICAgICAwO1xyXG4gICAgICBjb25zdCBhZGp1c3RlZERhdGUgPSBuZXcgRGF0ZShzY2hlZHVsZWREYXRlLmdldFRpbWUoKSArIGRlbGF5U2VjICogMTAwMCk7XHJcbiAgICAgIGNvbnN0IHR1cm5LZXkgPSBgJHsocm91dGVJZCB8fCBwYXR0ZXJuSWQpfV9fJHtub3JtYWxpemVTdG9wTmFtZUZvck1hdGNoKG9yaWdpblN0b3BOYW1lKX1gO1xyXG4gICAgICBjb25zdCB0dXJuSW5mbyA9IG9jY3VwYW5jeUluZGV4LnR1cm5hcm91bmRCeVJvdXRlU3RvcC5nZXQodHVybktleSk7XHJcbiAgICAgIGlmICh0dXJuSW5mbyAmJiB0dXJuSW5mby5lcG9jaCA+IGFkanVzdGVkRGF0ZS5nZXRUaW1lKCkpIHtcclxuICAgICAgICBhZGp1c3RlZERhdGUuc2V0VGltZSh0dXJuSW5mby5lcG9jaCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYWRqdXN0ZWRUaW1lU3RyID0gZm9ybWF0VGltZShhZGp1c3RlZERhdGUpO1xyXG4gICAgICBjb25zdCBldGFNaW51dGVzID0gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZCgoYWRqdXN0ZWREYXRlLmdldFRpbWUoKSAtIERhdGUubm93KCkpIC8gNjAwMDApKTtcclxuICAgICAgY29uc3Qgc2NoZWR1bGVkVGltZVN0ciA9IGZvcm1hdFRpbWUoc2NoZWR1bGVkRGF0ZSk7XHJcbiAgICAgIGNvbnN0IGRlbGF5TWludXRlcyA9IE1hdGgubWF4KDAsIE1hdGgucm91bmQoKGFkanVzdGVkRGF0ZS5nZXRUaW1lKCkgLSBzY2hlZHVsZWREYXRlLmdldFRpbWUoKSkgLyA2MDAwMCkpO1xyXG4gICAgICBsZXQgb2NjdXBhbmN5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICAgICAgbGV0IG9jY3VwYW5jeVJhdGlvOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICAgICAgaWYgKHJvdXRlSWQgfHwgcGF0dGVybklkKSB7XHJcbiAgICAgICAgY29uc3Qgc2FtcGxlcyA9XHJcbiAgICAgICAgICAocm91dGVJZCAmJiBvY2N1cGFuY3lJbmRleC5ieVJvdXRlU2FtcGxlcy5nZXQocm91dGVJZCkpIHx8XHJcbiAgICAgICAgICBvY2N1cGFuY3lJbmRleC5ieVJvdXRlU2FtcGxlcy5nZXQocGF0dGVybklkKSB8fFxyXG4gICAgICAgICAgW107XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0VHMgPSBhZGp1c3RlZERhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgIGxldCBiZXN0OiBPY2N1cGFuY3lTYW1wbGUgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBsZXQgYmVzdERpZmYgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzYW1wbGUgb2Ygc2FtcGxlcykge1xyXG4gICAgICAgICAgY29uc3QgZGlmZiA9IE1hdGguYWJzKHNhbXBsZS50cyAtIHRhcmdldFRzKTtcclxuICAgICAgICAgIGlmIChkaWZmIDw9IE9DQ1VQQU5DWV9NQVRDSF9XSU5ET1dfTVMgJiYgZGlmZiA8IGJlc3REaWZmKSB7XHJcbiAgICAgICAgICAgIGJlc3QgPSBzYW1wbGU7XHJcbiAgICAgICAgICAgIGJlc3REaWZmID0gZGlmZjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJlc3QpIHtcclxuICAgICAgICAgIG9jY3VwYW5jeSA9IGJlc3QudGV4dDtcclxuICAgICAgICAgIG9jY3VwYW5jeVJhdGlvID0gYmVzdC5yYXRpbztcclxuICAgICAgICAgIGlmIChvY2N1cGFuY3lSYXRpbyA9PT0gbnVsbCAmJiBvY2N1cGFuY3kpIHtcclxuICAgICAgICAgICAgb2NjdXBhbmN5UmF0aW8gPSBwYXJzZU9jY3VwYW5jeVJhdGlvKG9jY3VwYW5jeSkgPz8gb2NjdXBhbmN5UmF0aW9Gcm9tVGV4dChvY2N1cGFuY3kpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBvY2N1cGFuY3lMZXZlbCA9XHJcbiAgICAgICAgb2NjdXBhbmN5UmF0aW8gIT09IG51bGwgPyBvY2N1cGFuY3lMZXZlbEZyb21SYXRpbyhvY2N1cGFuY3lSYXRpbykgOiBtYXBPY2N1cGFuY3lMZXZlbChvY2N1cGFuY3kpO1xyXG4gICAgICBjb25zdCByYXdSb3V0ZU5hbWUgPSBleHRyYWN0Um91dGVOYW1lKHR0LCBwYXR0ZXJuSWQsIHJvdXRlSWQsIHBhdHRlcm4udGl0bGUpO1xyXG4gICAgICBjb25zdCByb3V0ZU5hbWUgPSByYXdSb3V0ZU5hbWU7XHJcbiAgICAgIGNvbnN0IHJvdXRlS2V5ID0gYnVpbGRSb3V0ZUtleShyYXdSb3V0ZU5hbWUsIHJvdXRlSWQsIHBhdHRlcm5JZCk7XHJcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWREZXN0ID0gbm9ybWFsaXplVGV4dChkZXN0U3RvcE5hbWUpO1xyXG4gICAgICBjb25zdCBub3JtYWxpemVkUm91dGUgPSBub3JtYWxpemVUZXh0KHJvdXRlTmFtZSk7XHJcbiAgICAgIGNvbnN0IGFkanVzdGVkRGVzdFN0b3BOYW1lID0gbm9ybWFsaXplZFJvdXRlLmluY2x1ZGVzKG5vcm1hbGl6ZWREZXN0KSA/ICcnIDogZGVzdFN0b3BOYW1lO1xyXG4gICAgICBjb25zdCBzdGF0dXNUZXh0ID0gZXh0cmFjdFN0YXR1c1RleHQodHQpO1xyXG4gICAgICBjb25zdCBzdGF0dXNJc0xhc3QgPSBzdGF0dXNUZXh0LmluY2x1ZGVzKCfntYInKTtcclxuXHJcbiAgICAgIGRlcGFydHVyZXMucHVzaCh7XHJcbiAgICAgICAgaWQ6IGAke3JvdXRlS2V5fS0ke2FkanVzdGVkVGltZVN0cn1gLFxyXG4gICAgICAgIHJvdXRlTmFtZSxcclxuICAgICAgICByb3V0ZUlkOiByb3V0ZUlkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICBwYXR0ZXJuSWQ6IHBhdHRlcm5JZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgb3JpZ2luU3RvcE5hbWUsXHJcbiAgICAgICAgb3JpZ2luUG9sZU5hbWUsXHJcbiAgICAgICAgZGVzdFN0b3BOYW1lOiBhZGp1c3RlZERlc3RTdG9wTmFtZSxcclxuICAgICAgICBzY2hlZHVsZWRUaW1lOiBzY2hlZHVsZWRUaW1lU3RyLFxyXG4gICAgICAgIHNjaGVkdWxlZEVwb2NoOiBzY2hlZHVsZWREYXRlLmdldFRpbWUoKSxcclxuICAgICAgICBkZWxheU1pbnV0ZXMsXHJcbiAgICAgICAgZGVwYXJ0dXJlVGltZTogYWRqdXN0ZWRUaW1lU3RyLFxyXG4gICAgICAgIGRlcGFydHVyZUVwb2NoOiBhZGp1c3RlZERhdGUuZ2V0VGltZSgpLFxyXG4gICAgICAgIGV0YU1pbnV0ZXMsXHJcbiAgICAgICAgb2NjdXBhbmN5LFxyXG4gICAgICAgIG9jY3VwYW5jeUxldmVsLFxyXG4gICAgICAgIG9jY3VwYW5jeVJhdGlvLFxyXG4gICAgICAgIHJvdXRlS2V5LFxyXG4gICAgICAgIHN0YXR1c0lzTGFzdCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIGNvbnN0IHVwY29taW5nID0gZGVwYXJ0dXJlcy5maWx0ZXIoKGQpID0+IGQuZGVwYXJ0dXJlRXBvY2ggPj0gbm93KTtcclxuICBjb25zdCBkZWR1cGVkID0gZGVkdXBlRGVwYXJ0dXJlcyh1cGNvbWluZyk7XHJcbiAgZGVkdXBlZC5zb3J0KChhLCBiKSA9PiBhLmRlcGFydHVyZUVwb2NoIC0gYi5kZXBhcnR1cmVFcG9jaCk7XHJcbiAgY29uc3QgdG9kYXlLZXkgPSB0b0pzdERhdGVLZXkoRGF0ZS5ub3coKSk7XHJcbiAgY29uc3QgbGFzdFRvZGF5QnlSb3V0ZSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgZGVkdXBlZC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBpZiAodG9Kc3REYXRlS2V5KGl0ZW0uZGVwYXJ0dXJlRXBvY2gpICE9PSB0b2RheUtleSkgcmV0dXJuO1xyXG4gICAgY29uc3QgY3VycmVudCA9IGxhc3RUb2RheUJ5Um91dGUuZ2V0KGl0ZW0ucm91dGVLZXkpO1xyXG4gICAgaWYgKCFjdXJyZW50IHx8IGl0ZW0uZGVwYXJ0dXJlRXBvY2ggPiBjdXJyZW50KSBsYXN0VG9kYXlCeVJvdXRlLnNldChpdGVtLnJvdXRlS2V5LCBpdGVtLmRlcGFydHVyZUVwb2NoKTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgYnlSb3V0ZSA9IG5ldyBNYXA8c3RyaW5nLCBJbnRlcm5hbEFycml2YWxbXT4oKTtcclxuICBkZWR1cGVkLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgIGlmICghYnlSb3V0ZS5oYXMoaXRlbS5yb3V0ZUtleSkpIGJ5Um91dGUuc2V0KGl0ZW0ucm91dGVLZXksIFtdKTtcclxuICAgIGJ5Um91dGUuZ2V0KGl0ZW0ucm91dGVLZXkpPy5wdXNoKGl0ZW0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBwZXJSb3V0ZTogSW50ZXJuYWxBcnJpdmFsW10gPSBbXTtcclxuICBieVJvdXRlLmZvckVhY2goKGl0ZW1zKSA9PiB7XHJcbiAgICBpdGVtcy5zb3J0KChhLCBiKSA9PiBhLmRlcGFydHVyZUVwb2NoIC0gYi5kZXBhcnR1cmVFcG9jaCk7XHJcbiAgICBwZXJSb3V0ZS5wdXNoKC4uLml0ZW1zLnNsaWNlKDAsIDIpKTtcclxuICB9KTtcclxuXHJcbiAgcGVyUm91dGUuc29ydCgoYSwgYikgPT4gYS5kZXBhcnR1cmVFcG9jaCAtIGIuZGVwYXJ0dXJlRXBvY2gpO1xyXG5cclxuICByZXR1cm4gcGVyUm91dGUubWFwKCh7IHN0YXR1c0lzTGFzdCwgcm91dGVLZXksIC4uLnJlc3QgfSkgPT4gKHtcclxuICAgIC4uLnJlc3QsXHJcbiAgICBpc0xhc3Q6IHN0YXR1c0lzTGFzdCB8fCByZXN0LmRlcGFydHVyZUVwb2NoID09PSBsYXN0VG9kYXlCeVJvdXRlLmdldChyb3V0ZUtleSksXHJcbiAgfSkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmV4dEJ1c2VzU2FmZShvcmlnaW5TdG9wTmFtZTogc3RyaW5nLCBkZXN0U3RvcE5hbWU6IHN0cmluZyk6IFByb21pc2U8QnVzQXJyaXZhbFtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghVE9LRU4pIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW2J1c0FwaV0gT0RQVF9UT0tFTiBpcyBub3Qgc2V0Jyk7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIHJldHVybiBhd2FpdCBnZXROZXh0QnVzZXMob3JpZ2luU3RvcE5hbWUsIGRlc3RTdG9wTmFtZSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5lcnJvcignW2J1c0FwaV0gRXJyb3I6JywgZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogU3RyaW5nKGUpKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkJBU0UiLCJUT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJPRFBUX1RPS0VOIiwiTkVYVF9QVUJMSUNfT0RQVF9UT0tFTiIsIlRPRUlfT1BFUkFUT1IiLCJQQUdFX1NJWkUiLCJPQ0NVUEFOQ1lfQ0FDSEVfVFRMX01TIiwiUEFUVEVSTl9DQUNIRV9UVExfTVMiLCJQT0xFX0NBQ0hFX1RUTF9NUyIsIlNUT1BfTElTVF9DQUNIRV9UVExfTVMiLCJPQ0NVUEFOQ1lfTUFUQ0hfV0lORE9XX01TIiwib2NjdXBhbmN5Q2FjaGUiLCJwYXR0ZXJuQ2FjaGUiLCJwb2xlQ2FjaGUiLCJNYXAiLCJzdG9wTGlzdENhY2hlIiwiYnVpbGRVcmwiLCJwYXRoIiwicGFyYW1zIiwidXJsIiwiVVJMIiwiayIsInYiLCJPYmplY3QiLCJlbnRyaWVzIiwic2VhcmNoUGFyYW1zIiwic2V0IiwiU3RyaW5nIiwidG9TdHJpbmciLCJ3YWl0IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJmZXRjaEpzb25VcmwiLCJhdHRlbXB0IiwicmVzIiwiZmV0Y2giLCJzdGF0dXMiLCJvayIsInRleHQiLCJFcnJvciIsImRhdGEiLCJqc29uIiwiQXJyYXkiLCJpc0FycmF5IiwiZmV0Y2hBbGxQYWdlcyIsInJlc291cmNlIiwicmVzdWx0cyIsInNraXAiLCJmaXJzdCIsImJhdGNoIiwibGVuZ3RoIiwiZmFsbGJhY2siLCJwdXNoIiwiZ2V0U3RvcE5hbWUiLCJub3RlIiwic3BsaXQiLCJub3JtYWxpemVUZXh0IiwidmFsdWUiLCJyZXBsYWNlIiwibm9ybWFsaXplU3RvcE5hbWVGb3JNYXRjaCIsInRvTG93ZXJDYXNlIiwibm90ZU1hdGNoZXNOYW1lcyIsIm5hbWVzIiwibm9ybWFsaXplZE5vdGUiLCJzb21lIiwibmFtZSIsInN0b3BzRnJvbVRpbWV0YWJsZSIsInR0Iiwib2JqcyIsIm1hcCIsIm9iaiIsInBvbGUiLCJpc01pZG5pZ2h0IiwiQm9vbGVhbiIsImFycml2YWxUaW1lIiwiZGVwYXJ0dXJlVGltZSIsImZpbmRTdG9wSW5kZXgiLCJzdG9wcyIsImlkcyIsImhhc0lkcyIsImZpbmRJbmRleCIsInMiLCJpbmNsdWRlcyIsInBhcnNlVGltZVRvRGF0ZSIsInRpbWVTdHIiLCJtYXRjaCIsIm5vdyIsIkRhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJOdW1iZXIiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImdldFRpbWUiLCJmb3JtYXRUaW1lIiwiaCIsImdldEhvdXJzIiwicGFkU3RhcnQiLCJtIiwiZ2V0TWludXRlcyIsInRvSnN0RGF0ZUtleSIsImVwb2NoTXMiLCJqc3QiLCJ5IiwiZ2V0VVRDRnVsbFllYXIiLCJnZXRVVENNb250aCIsImQiLCJnZXRVVENEYXRlIiwiZXh0cmFjdFN0YXR1c1RleHQiLCJzb3VyY2UiLCJkaXJlY3QiLCJrZXkiLCJ0ZXN0IiwidW5kZWZpbmVkIiwic3RyIiwidHJpbSIsImluZmVyQnVzcm91dGVJZCIsInBhdHRlcm4iLCJtYXBPY2N1cGFuY3lMZXZlbCIsIm9jY3VwYW5jeSIsInBhcnNlT2NjdXBhbmN5UmF0aW8iLCJpc05hTiIsIk1hdGgiLCJtYXgiLCJtaW4iLCJidWlsZE5hbWVWYXJpYW50cyIsImlucHV0IiwicG9sZXMiLCJTZXQiLCJ0cmltbWVkIiwiYWRkIiwiZm9yRWFjaCIsInAiLCJ0aXRsZSIsImZyb20iLCJnZXRQb2xlTWF0Y2hlc0J5TmFtZSIsImNhY2hlZCIsImdldCIsImV4cGlyZXMiLCJxdWVyaWVzIiwiZW5kc1dpdGgiLCJzbGljZSIsIm1hdGNoZXMiLCJub3JtYWxpemVkIiwicSIsImlkIiwicGF0dGVybnMiLCJmaWx0ZXIiLCJoYXMiLCJleGlzdGluZyIsInNpemUiLCJsaXN0IiwiZ2V0U3RvcExpc3QiLCJub3JtYWxpemVkUXVlcnkiLCJpdGVtIiwicmVzdWx0IiwidmFsdWVzIiwiZ2V0QnVzU3RvcFN1Z2dlc3Rpb25zIiwicXVlcnkiLCJhbmNob3IiLCJsaW1pdCIsInRyaW1tZWRRdWVyeSIsImZpbHRlcmVkIiwiYW5jaG9yVHJpbW1lZCIsImFuY2hvclBhdHRlcm5zIiwiYW5jaG9yTm9ybWFsaXplZCIsImFuY2hvck1hdGNoZXMiLCJzY29yZWQiLCJzdGFydHMiLCJzdGFydHNXaXRoIiwic2NvcmUiLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwic2VlbiIsImVudHJ5IiwiZXh0cmFjdFJvdXRlTmFtZSIsInBhdHRlcm5JZCIsInJvdXRlSWQiLCJzdHJpcEJyYW5jaEZyb21QYXR0ZXJuIiwic3RyaXBCcmFuY2hGcm9tUm91dGVOYW1lIiwicm91dGVOYW1lIiwiYnVpbGRSb3V0ZUtleSIsImJhc2VOYW1lIiwiYmFzZVBhdHRlcm4iLCJleHRyYWN0RGVzdGluYXRpb25DYW5kaWRhdGUiLCJidXMiLCJleHRyYWN0UHJlZGljdGVkQXJyaXZhbEVwb2NoIiwiY2FuZGlkYXRlIiwidHMiLCJwYXJzZSIsImZvcm1hdFJvdXRlTmFtZVdpdGhEZXN0aW5hdGlvbiIsImRlc3RTdG9wTmFtZSIsImJhc2UiLCJkZXN0Iiwibm9ybWFsaXplZEJhc2UiLCJub3JtYWxpemVkRGVzdCIsImV4dHJhY3RPY2N1cGFuY3lDYW5kaWRhdGUiLCJleHRyYWN0QnVzVGltZXN0YW1wIiwib2NjdXBhbmN5UmF0aW9Gcm9tVGV4dCIsIm51bSIsImxvd2VyIiwib2NjdXBhbmN5TGV2ZWxGcm9tUmF0aW8iLCJyYXRpbyIsImJ1aWxkT2NjdXBhbmN5SW5kZXgiLCJidXNlcyIsImJ5Um91dGVTYW1wbGVzIiwiZGVsYXlCeVJvdXRlIiwidHVybmFyb3VuZEJ5Um91dGVTdG9wIiwicHJlZGljdGVkRXBvY2giLCJkZXN0aW5hdGlvblRleHQiLCJkZWxheVJhdyIsImRlbGF5U2VjIiwiaXNGaW5pdGUiLCJkZWxheUtleSIsImRlbGF5RXhpc3RpbmciLCJ0dXJuS2V5IiwiZXBvY2giLCJzYW1wbGVzIiwic2FtcGxlQnVzZXMiLCJnZXRPY2N1cGFuY3lTYW1wbGVTdGF0cyIsInJvdXRlSWRzIiwicGF0dGVybklkcyIsImluZGV4IiwidW5pcVJvdXRlSWRzIiwidW5pcVBhdHRlcm5JZHMiLCJyb3V0ZUNvdW50cyIsInBhdHRlcm5Db3VudHMiLCJ0b3RhbFNhbXBsZXMiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtcyIsImRlZHVwZURlcGFydHVyZXMiLCJkZXBhcnR1cmVzIiwiYnlSb3V0ZSIsInJvdXRlS2V5IiwibWVyZ2VkIiwiZGVwYXJ0dXJlRXBvY2giLCJyZWR1Y2VkIiwicHJldiIsImdldE5leHRCdXNlcyIsIm9yaWdpblN0b3BOYW1lIiwib3JpZ2luUG9sZXMiLCJkZXN0UG9sZXMiLCJhbGwiLCJvcmlnaW5Qb2xlTmFtZU1hcCIsIm9yaWdpbklkcyIsImRlc3RJZHMiLCJvcmlnaW5OYW1lcyIsImRlc3ROYW1lcyIsImNhY2hlZFBhdHRlcm5zIiwib2NjdXBhbmN5SW5kZXgiLCJjYW5kaWRhdGVQYXR0ZXJucyIsIm9yZGVycyIsIm9yaWdpbklkeCIsImRlc3RJZHgiLCJvIiwiaWR4IiwiYnVzcm91dGUiLCJ0aW1ldGFibGVzIiwic3RvcCIsIm9yaWdpblBvbGVOYW1lIiwic2NoZWR1bGVkRGF0ZSIsImFkanVzdGVkRGF0ZSIsInR1cm5JbmZvIiwic2V0VGltZSIsImFkanVzdGVkVGltZVN0ciIsImV0YU1pbnV0ZXMiLCJyb3VuZCIsInNjaGVkdWxlZFRpbWVTdHIiLCJkZWxheU1pbnV0ZXMiLCJvY2N1cGFuY3lSYXRpbyIsInRhcmdldFRzIiwiYmVzdCIsImJlc3REaWZmIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJzYW1wbGUiLCJkaWZmIiwiYWJzIiwib2NjdXBhbmN5TGV2ZWwiLCJyYXdSb3V0ZU5hbWUiLCJub3JtYWxpemVkUm91dGUiLCJhZGp1c3RlZERlc3RTdG9wTmFtZSIsInN0YXR1c1RleHQiLCJzdGF0dXNJc0xhc3QiLCJzY2hlZHVsZWRUaW1lIiwic2NoZWR1bGVkRXBvY2giLCJ1cGNvbWluZyIsImRlZHVwZWQiLCJ0b2RheUtleSIsImxhc3RUb2RheUJ5Um91dGUiLCJjdXJyZW50IiwicGVyUm91dGUiLCJyZXN0IiwiaXNMYXN0IiwiZ2V0TmV4dEJ1c2VzU2FmZSIsImNvbnNvbGUiLCJlcnJvciIsImUiLCJtZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/busApi.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbus%2Fstops%2Froute&page=%2Fapi%2Fbus%2Fstops%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbus%2Fstops%2Froute.ts&appDir=C%3A%5CUsers%5Cmichi%5Cbus-ui%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cmichi%5Cbus-ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();